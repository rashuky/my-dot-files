/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var nw=Object.create;var Tc=Object.defineProperty;var iw=Object.getOwnPropertyDescriptor;var sw=Object.getOwnPropertyNames;var ow=Object.getPrototypeOf,aw=Object.prototype.hasOwnProperty;var p=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var cw=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of sw(e))!aw.call(t,i)&&i!==r&&Tc(t,i,{get:()=>e[i],enumerable:!(n=iw(e,i))||n.enumerable});return t};var N=(t,e,r)=>(r=t!=null?nw(ow(t)):{},cw(e||!t||!t.__esModule?Tc(r,"default",{value:t,enumerable:!0}):r,t));var Zt=p((ZP,Hc)=>{"use strict";var Uc=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);Hc.exports=t=>t?Object.keys(t).map(e=>[Uc.has(e)?Uc.get(e):e,t[e]]).reduce((e,r)=>(e[r[0]]=r[1],e),Object.create(null)):{}});var Dn=p((KP,Kc)=>{"use strict";var jc=typeof process=="object"&&process?process:{stdout:null,stderr:null},vw=require("events"),Wc=require("stream"),xw=require("string_decoder"),Gc=xw.StringDecoder,Ue=Symbol("EOF"),He=Symbol("maybeEmitEnd"),lt=Symbol("emittedEnd"),Tn=Symbol("emittingEnd"),Fr=Symbol("emittedError"),Cn=Symbol("closed"),zc=Symbol("read"),On=Symbol("flush"),Vc=Symbol("flushChunk"),Q=Symbol("encoding"),je=Symbol("decoder"),In=Symbol("flowing"),qr=Symbol("paused"),Kt=Symbol("resume"),O=Symbol("buffer"),ke=Symbol("pipes"),$=Symbol("bufferLength"),Os=Symbol("bufferPush"),Is=Symbol("bufferShift"),M=Symbol("objectMode"),I=Symbol("destroyed"),_s=Symbol("error"),ks=Symbol("emitData"),Jc=Symbol("emitEnd"),Ds=Symbol("emitEnd2"),We=Symbol("async"),Ns=Symbol("abort"),_n=Symbol("aborted"),Lt=Symbol("signal"),Br=t=>Promise.resolve().then(t),Zc=global._MP_NO_ITERATOR_SYMBOLS_!=="1",Yc=Zc&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),Xc=Zc&&Symbol.iterator||Symbol("iterator not implemented"),bw=t=>t==="end"||t==="finish"||t==="prefinish",Pw=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,Rw=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),kn=class{constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[Kt](),r.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},$s=class extends kn{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},Mr=class extends Wc{constructor(e){super(),this[In]=!1,this[qr]=!1,this[ke]=[],this[O]=[],this[M]=e&&e.objectMode||!1,this[M]?this[Q]=null:this[Q]=e&&e.encoding||null,this[Q]==="buffer"&&(this[Q]=null),this[We]=e&&!!e.async||!1,this[je]=this[Q]?new Gc(this[Q]):null,this[Ue]=!1,this[lt]=!1,this[Tn]=!1,this[Cn]=!1,this[Fr]=null,this.writable=!0,this.readable=!0,this[$]=0,this[I]=!1,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[O]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[ke]}),this[Lt]=e&&e.signal,this[_n]=!1,this[Lt]&&(this[Lt].addEventListener("abort",()=>this[Ns]()),this[Lt].aborted&&this[Ns]())}get bufferLength(){return this[$]}get encoding(){return this[Q]}set encoding(e){if(this[M])throw new Error("cannot set encoding in objectMode");if(this[Q]&&e!==this[Q]&&(this[je]&&this[je].lastNeed||this[$]))throw new Error("cannot change encoding");this[Q]!==e&&(this[je]=e?new Gc(e):null,this[O].length&&(this[O]=this[O].map(r=>this[je].write(r)))),this[Q]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[M]}set objectMode(e){this[M]=this[M]||!!e}get async(){return this[We]}set async(e){this[We]=this[We]||!!e}[Ns](){this[_n]=!0,this.emit("abort",this[Lt].reason),this.destroy(this[Lt].reason)}get aborted(){return this[_n]}set aborted(e){}write(e,r,n){if(this[_n])return!1;if(this[Ue])throw new Error("write after end");if(this[I])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[We]?Br:s=>s();return!this[M]&&!Buffer.isBuffer(e)&&(Rw(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):Pw(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[M]?(this.flowing&&this[$]!==0&&this[On](!0),this.flowing?this.emit("data",e):this[Os](e),this[$]!==0&&this.emit("readable"),n&&i(n),this.flowing):e.length?(typeof e=="string"&&!(r===this[Q]&&!this[je].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Q]&&(e=this[je].write(e)),this.flowing&&this[$]!==0&&this[On](!0),this.flowing?this.emit("data",e):this[Os](e),this[$]!==0&&this.emit("readable"),n&&i(n),this.flowing):(this[$]!==0&&this.emit("readable"),n&&i(n),this.flowing)}read(e){if(this[I])return null;if(this[$]===0||e===0||e>this[$])return this[He](),null;this[M]&&(e=null),this[O].length>1&&!this[M]&&(this.encoding?this[O]=[this[O].join("")]:this[O]=[Buffer.concat(this[O],this[$])]);let r=this[zc](e||null,this[O][0]);return this[He](),r}[zc](e,r){return e===r.length||e===null?this[Is]():(this[O][0]=r.slice(e),r=r.slice(0,e),this[$]-=e),this.emit("data",r),!this[O].length&&!this[Ue]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[Ue]=!0,this.writable=!1,(this.flowing||!this[qr])&&this[He](),this}[Kt](){this[I]||(this[qr]=!1,this[In]=!0,this.emit("resume"),this[O].length?this[On]():this[Ue]?this[He]():this.emit("drain"))}resume(){return this[Kt]()}pause(){this[In]=!1,this[qr]=!0}get destroyed(){return this[I]}get flowing(){return this[In]}get paused(){return this[qr]}[Os](e){this[M]?this[$]+=1:this[$]+=e.length,this[O].push(e)}[Is](){return this[M]?this[$]-=1:this[$]-=this[O][0].length,this[O].shift()}[On](e){do;while(this[Vc](this[Is]())&&this[O].length);!e&&!this[O].length&&!this[Ue]&&this.emit("drain")}[Vc](e){return this.emit("data",e),this.flowing}pipe(e,r){if(this[I])return;let n=this[lt];return r=r||{},e===jc.stdout||e===jc.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[ke].push(r.proxyErrors?new $s(this,e,r):new kn(this,e,r)),this[We]?Br(()=>this[Kt]()):this[Kt]()),e}unpipe(e){let r=this[ke].find(n=>n.dest===e);r&&(this[ke].splice(this[ke].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);return e==="data"&&!this[ke].length&&!this.flowing?this[Kt]():e==="readable"&&this[$]!==0?super.emit("readable"):bw(e)&&this[lt]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Fr]&&(this[We]?Br(()=>r.call(this,this[Fr])):r.call(this,this[Fr])),n}get emittedEnd(){return this[lt]}[He](){!this[Tn]&&!this[lt]&&!this[I]&&this[O].length===0&&this[Ue]&&(this[Tn]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Cn]&&this.emit("close"),this[Tn]=!1)}emit(e,r,...n){if(e!=="error"&&e!=="close"&&e!==I&&this[I])return;if(e==="data")return!this[M]&&!r?!1:this[We]?Br(()=>this[ks](r)):this[ks](r);if(e==="end")return this[Jc]();if(e==="close"){if(this[Cn]=!0,!this[lt]&&!this[I])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[Fr]=r,super.emit(_s,r);let s=!this[Lt]||this.listeners("error").length?super.emit("error",r):!1;return this[He](),s}else if(e==="resume"){let s=super.emit("resume");return this[He](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,r,...n);return this[He](),i}[ks](e){for(let n of this[ke])n.dest.write(e)===!1&&this.pause();let r=super.emit("data",e);return this[He](),r}[Jc](){this[lt]||(this[lt]=!0,this.readable=!1,this[We]?Br(()=>this[Ds]()):this[Ds]())}[Ds](){if(this[je]){let r=this[je].end();if(r){for(let n of this[ke])n.dest.write(r);super.emit("data",r)}}for(let r of this[ke])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[M]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[M]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[M]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[M]?Promise.reject(new Error("cannot concat in objectMode")):this[Q]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(I,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Yc](){let e=!1,r=()=>(this.pause(),e=!0,Promise.resolve({done:!0}));return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Ue])return r();let s=null,o=null,a=f=>{this.removeListener("data",c),this.removeListener("end",l),this.removeListener(I,u),r(),o(f)},c=f=>{this.removeListener("error",a),this.removeListener("end",l),this.removeListener(I,u),this.pause(),s({value:f,done:!!this[Ue]})},l=()=>{this.removeListener("error",a),this.removeListener("data",c),this.removeListener(I,u),r(),s({done:!0})},u=()=>a(new Error("stream destroyed"));return new Promise((f,d)=>{o=d,s=f,this.once(I,u),this.once("error",a),this.once("end",l),this.once("data",c)})},throw:r,return:r,[Yc](){return this}}}[Xc](){let e=!1,r=()=>(this.pause(),this.removeListener(_s,r),this.removeListener(I,r),this.removeListener("end",r),e=!0,{done:!0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{value:i}};return this.once("end",r),this.once(_s,r),this.once(I,r),{next:n,throw:r,return:r,[Xc](){return this}}}destroy(e){return this[I]?(e?this.emit("error",e):this.emit(I),this):(this[I]=!0,this[O].length=0,this[$]=0,typeof this.close=="function"&&!this[Cn]&&this.close(),e?this.emit("error",e):this.emit(I),this)}static isStream(e){return!!e&&(e instanceof Mr||e instanceof Wc||e instanceof vw&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}};Kc.exports=Mr});var el=p((QP,Qc)=>{var Lw=require("zlib").constants||{ZLIB_VERNUM:4736};Qc.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},Lw))});var ul=p((eR,ll)=>{"use strict";var tl=typeof process=="object"&&process?process:{stdout:null,stderr:null},Tw=require("events"),rl=require("stream"),nl=require("string_decoder").StringDecoder,Ge=Symbol("EOF"),ze=Symbol("maybeEmitEnd"),ut=Symbol("emittedEnd"),Nn=Symbol("emittingEnd"),Ur=Symbol("emittedError"),$n=Symbol("closed"),il=Symbol("read"),An=Symbol("flush"),sl=Symbol("flushChunk"),ee=Symbol("encoding"),Ve=Symbol("decoder"),Fn=Symbol("flowing"),Hr=Symbol("paused"),Qt=Symbol("resume"),A=Symbol("bufferLength"),As=Symbol("bufferPush"),Fs=Symbol("bufferShift"),j=Symbol("objectMode"),W=Symbol("destroyed"),qs=Symbol("emitData"),ol=Symbol("emitEnd"),Bs=Symbol("emitEnd2"),Je=Symbol("async"),jr=t=>Promise.resolve().then(t),al=global._MP_NO_ITERATOR_SYMBOLS_!=="1",Cw=al&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),Ow=al&&Symbol.iterator||Symbol("iterator not implemented"),Iw=t=>t==="end"||t==="finish"||t==="prefinish",_w=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,kw=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),qn=class{constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[Qt](),r.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Ms=class extends qn{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}};ll.exports=class cl extends rl{constructor(e){super(),this[Fn]=!1,this[Hr]=!1,this.pipes=[],this.buffer=[],this[j]=e&&e.objectMode||!1,this[j]?this[ee]=null:this[ee]=e&&e.encoding||null,this[ee]==="buffer"&&(this[ee]=null),this[Je]=e&&!!e.async||!1,this[Ve]=this[ee]?new nl(this[ee]):null,this[Ge]=!1,this[ut]=!1,this[Nn]=!1,this[$n]=!1,this[Ur]=null,this.writable=!0,this.readable=!0,this[A]=0,this[W]=!1}get bufferLength(){return this[A]}get encoding(){return this[ee]}set encoding(e){if(this[j])throw new Error("cannot set encoding in objectMode");if(this[ee]&&e!==this[ee]&&(this[Ve]&&this[Ve].lastNeed||this[A]))throw new Error("cannot change encoding");this[ee]!==e&&(this[Ve]=e?new nl(e):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[Ve].write(r)))),this[ee]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[j]}set objectMode(e){this[j]=this[j]||!!e}get async(){return this[Je]}set async(e){this[Je]=this[Je]||!!e}write(e,r,n){if(this[Ge])throw new Error("write after end");if(this[W])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[Je]?jr:s=>s();return!this[j]&&!Buffer.isBuffer(e)&&(kw(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):_w(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[j]?(this.flowing&&this[A]!==0&&this[An](!0),this.flowing?this.emit("data",e):this[As](e),this[A]!==0&&this.emit("readable"),n&&i(n),this.flowing):e.length?(typeof e=="string"&&!(r===this[ee]&&!this[Ve].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[ee]&&(e=this[Ve].write(e)),this.flowing&&this[A]!==0&&this[An](!0),this.flowing?this.emit("data",e):this[As](e),this[A]!==0&&this.emit("readable"),n&&i(n),this.flowing):(this[A]!==0&&this.emit("readable"),n&&i(n),this.flowing)}read(e){if(this[W])return null;if(this[A]===0||e===0||e>this[A])return this[ze](),null;this[j]&&(e=null),this.buffer.length>1&&!this[j]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[A])]);let r=this[il](e||null,this.buffer[0]);return this[ze](),r}[il](e,r){return e===r.length||e===null?this[Fs]():(this.buffer[0]=r.slice(e),r=r.slice(0,e),this[A]-=e),this.emit("data",r),!this.buffer.length&&!this[Ge]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[Ge]=!0,this.writable=!1,(this.flowing||!this[Hr])&&this[ze](),this}[Qt](){this[W]||(this[Hr]=!1,this[Fn]=!0,this.emit("resume"),this.buffer.length?this[An]():this[Ge]?this[ze]():this.emit("drain"))}resume(){return this[Qt]()}pause(){this[Fn]=!1,this[Hr]=!0}get destroyed(){return this[W]}get flowing(){return this[Fn]}get paused(){return this[Hr]}[As](e){this[j]?this[A]+=1:this[A]+=e.length,this.buffer.push(e)}[Fs](){return this.buffer.length&&(this[j]?this[A]-=1:this[A]-=this.buffer[0].length),this.buffer.shift()}[An](e){do;while(this[sl](this[Fs]()));!e&&!this.buffer.length&&!this[Ge]&&this.emit("drain")}[sl](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,r){if(this[W])return;let n=this[ut];return r=r||{},e===tl.stdout||e===tl.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this.pipes.push(r.proxyErrors?new Ms(this,e,r):new qn(this,e,r)),this[Je]?jr(()=>this[Qt]()):this[Qt]()),e}unpipe(e){let r=this.pipes.find(n=>n.dest===e);r&&(this.pipes.splice(this.pipes.indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);return e==="data"&&!this.pipes.length&&!this.flowing?this[Qt]():e==="readable"&&this[A]!==0?super.emit("readable"):Iw(e)&&this[ut]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Ur]&&(this[Je]?jr(()=>r.call(this,this[Ur])):r.call(this,this[Ur])),n}get emittedEnd(){return this[ut]}[ze](){!this[Nn]&&!this[ut]&&!this[W]&&this.buffer.length===0&&this[Ge]&&(this[Nn]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[$n]&&this.emit("close"),this[Nn]=!1)}emit(e,r,...n){if(e!=="error"&&e!=="close"&&e!==W&&this[W])return;if(e==="data")return r?this[Je]?jr(()=>this[qs](r)):this[qs](r):!1;if(e==="end")return this[ol]();if(e==="close"){if(this[$n]=!0,!this[ut]&&!this[W])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[Ur]=r;let s=super.emit("error",r);return this[ze](),s}else if(e==="resume"){let s=super.emit("resume");return this[ze](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,r,...n);return this[ze](),i}[qs](e){for(let n of this.pipes)n.dest.write(e)===!1&&this.pause();let r=super.emit("data",e);return this[ze](),r}[ol](){this[ut]||(this[ut]=!0,this.readable=!1,this[Je]?jr(()=>this[Bs]()):this[Bs]())}[Bs](){if(this[Ve]){let r=this[Ve].end();if(r){for(let n of this.pipes)n.dest.write(r);super.emit("data",r)}}for(let r of this.pipes)r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[j]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[j]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[j]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[j]?Promise.reject(new Error("cannot concat in objectMode")):this[ee]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(W,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Cw](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[Ge])return Promise.resolve({done:!0});let n=null,i=null,s=l=>{this.removeListener("data",o),this.removeListener("end",a),i(l)},o=l=>{this.removeListener("error",s),this.removeListener("end",a),this.pause(),n({value:l,done:!!this[Ge]})},a=()=>{this.removeListener("error",s),this.removeListener("data",o),n({done:!0})},c=()=>s(new Error("stream destroyed"));return new Promise((l,u)=>{i=u,n=l,this.once(W,c),this.once("error",s),this.once("end",a),this.once("data",o)})}}}[Ow](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(e){return this[W]?(e?this.emit("error",e):this.emit(W),this):(this[W]=!0,this.buffer.length=0,this[A]=0,typeof this.close=="function"&&!this[$n]&&this.close(),e?this.emit("error",e):this.emit(W),this)}static isStream(e){return!!e&&(e instanceof cl||e instanceof rl||e instanceof Tw&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var ro=p(se=>{"use strict";var Gs=require("assert"),ft=require("buffer").Buffer,dl=require("zlib"),Tt=se.constants=el(),Dw=ul(),fl=ft.concat,Ct=Symbol("_superWrite"),tr=class extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},Nw=Symbol("opts"),Wr=Symbol("flushFlag"),hl=Symbol("finishFlushFlag"),to=Symbol("fullFlushFlag"),L=Symbol("handle"),Bn=Symbol("onError"),er=Symbol("sawError"),Us=Symbol("level"),Hs=Symbol("strategy"),js=Symbol("ended"),tR=Symbol("_defaultFullFlush"),Mn=class extends Dw{constructor(e,r){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this[er]=!1,this[js]=!1,this[Nw]=e,this[Wr]=e.flush,this[hl]=e.finishFlush;try{this[L]=new dl[r](e)}catch(n){throw new tr(n)}this[Bn]=n=>{this[er]||(this[er]=!0,this.close(),this.emit("error",n))},this[L].on("error",n=>this[Bn](new tr(n))),this.once("end",()=>this.close)}close(){this[L]&&(this[L].close(),this[L]=null,this.emit("close"))}reset(){if(!this[er])return Gs(this[L],"zlib binding closed"),this[L].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[to]),this.write(Object.assign(ft.alloc(0),{[Wr]:e})))}end(e,r,n){return e&&this.write(e,r),this.flush(this[hl]),this[js]=!0,super.end(null,null,n)}get ended(){return this[js]}write(e,r,n){if(typeof r=="function"&&(n=r,r="utf8"),typeof e=="string"&&(e=ft.from(e,r)),this[er])return;Gs(this[L],"zlib binding closed");let i=this[L]._handle,s=i.close;i.close=()=>{};let o=this[L].close;this[L].close=()=>{},ft.concat=l=>l;let a;try{let l=typeof e[Wr]=="number"?e[Wr]:this[Wr];a=this[L]._processChunk(e,l),ft.concat=fl}catch(l){ft.concat=fl,this[Bn](new tr(l))}finally{this[L]&&(this[L]._handle=i,i.close=s,this[L].close=o,this[L].removeAllListeners("error"))}this[L]&&this[L].on("error",l=>this[Bn](new tr(l)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[Ct](ft.from(a[0]));for(let l=1;l<a.length;l++)c=this[Ct](a[l])}else c=this[Ct](ft.from(a));return n&&n(),c}[Ct](e){return super.write(e)}},Ye=class extends Mn{constructor(e,r){e=e||{},e.flush=e.flush||Tt.Z_NO_FLUSH,e.finishFlush=e.finishFlush||Tt.Z_FINISH,super(e,r),this[to]=Tt.Z_FULL_FLUSH,this[Us]=e.level,this[Hs]=e.strategy}params(e,r){if(!this[er]){if(!this[L])throw new Error("cannot switch params when binding is closed");if(!this[L].params)throw new Error("not supported in this implementation");if(this[Us]!==e||this[Hs]!==r){this.flush(Tt.Z_SYNC_FLUSH),Gs(this[L],"zlib binding closed");let n=this[L].flush;this[L].flush=(i,s)=>{this.flush(i),s()};try{this[L].params(e,r)}finally{this[L].flush=n}this[L]&&(this[Us]=e,this[Hs]=r)}}}},zs=class extends Ye{constructor(e){super(e,"Deflate")}},Vs=class extends Ye{constructor(e){super(e,"Inflate")}},Ws=Symbol("_portable"),Js=class extends Ye{constructor(e){super(e,"Gzip"),this[Ws]=e&&!!e.portable}[Ct](e){return this[Ws]?(this[Ws]=!1,e[9]=255,super[Ct](e)):super[Ct](e)}},Ys=class extends Ye{constructor(e){super(e,"Gunzip")}},Xs=class extends Ye{constructor(e){super(e,"DeflateRaw")}},Zs=class extends Ye{constructor(e){super(e,"InflateRaw")}},Ks=class extends Ye{constructor(e){super(e,"Unzip")}},Un=class extends Mn{constructor(e,r){e=e||{},e.flush=e.flush||Tt.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||Tt.BROTLI_OPERATION_FINISH,super(e,r),this[to]=Tt.BROTLI_OPERATION_FLUSH}},Qs=class extends Un{constructor(e){super(e,"BrotliCompress")}},eo=class extends Un{constructor(e){super(e,"BrotliDecompress")}};se.Deflate=zs;se.Inflate=Vs;se.Gzip=Js;se.Gunzip=Ys;se.DeflateRaw=Xs;se.InflateRaw=Zs;se.Unzip=Ks;typeof dl.BrotliCompress=="function"?(se.BrotliCompress=Qs,se.BrotliDecompress=eo):se.BrotliCompress=se.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var rr=p((iR,pl)=>{var $w=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;pl.exports=$w!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var Hn=p((oR,ml)=>{"use strict";var Aw=Dn(),no=rr(),io=Symbol("slurp");ml.exports=class extends Aw{constructor(e,r,n){switch(super(),this.pause(),this.extended=r,this.globalExtended=n,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=no(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=no(e.linkpath),this.uname=e.uname,this.gname=e.gname,r&&this[io](r),n&&this[io](n,!0)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,i=this.blockRemain;return this.remain=Math.max(0,n-r),this.blockRemain=Math.max(0,i-r),this.ignore?!0:n>=r?super.write(e):super.write(e.slice(0,n))}[io](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=n==="path"||n==="linkpath"?no(e[n]):e[n])}}});var so=p(jn=>{"use strict";jn.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);jn.code=new Map(Array.from(jn.name).map(t=>[t[1],t[0]]))});var yl=p((cR,El)=>{"use strict";var Fw=(t,e)=>{if(Number.isSafeInteger(t))t<0?Bw(t,e):qw(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},qw=(t,e)=>{e[0]=128;for(var r=e.length;r>1;r--)e[r-1]=t&255,t=Math.floor(t/256)},Bw=(t,e)=>{e[0]=255;var r=!1;t=t*-1;for(var n=e.length;n>1;n--){var i=t&255;t=Math.floor(t/256),r?e[n-1]=gl(i):i===0?e[n-1]=0:(r=!0,e[n-1]=wl(i))}},Mw=t=>{let e=t[0],r=e===128?Hw(t.slice(1,t.length)):e===255?Uw(t):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},Uw=t=>{for(var e=t.length,r=0,n=!1,i=e-1;i>-1;i--){var s=t[i],o;n?o=gl(s):s===0?o=s:(n=!0,o=wl(s)),o!==0&&(r-=o*Math.pow(256,e-i-1))}return r},Hw=t=>{for(var e=t.length,r=0,n=e-1;n>-1;n--){var i=t[n];i!==0&&(r+=i*Math.pow(256,e-n-1))}return r},gl=t=>(255^t)&255,wl=t=>(255^t)+1&255;El.exports={encode:Fw,parse:Mw}});var ir=p((lR,vl)=>{"use strict";var oo=so(),nr=require("path").posix,Sl=yl(),ao=Symbol("slurp"),oe=Symbol("type"),uo=class{constructor(e,r,n,i){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[oe]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,r||0,n,i):e&&this.set(e)}decode(e,r,n,i){if(r||(r=0),!e||!(e.length>=r+512))throw new Error("need 512 bytes for header");if(this.path=Ot(e,r,100),this.mode=ht(e,r+100,8),this.uid=ht(e,r+108,8),this.gid=ht(e,r+116,8),this.size=ht(e,r+124,12),this.mtime=co(e,r+136,12),this.cksum=ht(e,r+148,12),this[ao](n),this[ao](i,!0),this[oe]=Ot(e,r+156,1),this[oe]===""&&(this[oe]="0"),this[oe]==="0"&&this.path.slice(-1)==="/"&&(this[oe]="5"),this[oe]==="5"&&(this.size=0),this.linkpath=Ot(e,r+157,100),e.slice(r+257,r+265).toString()==="ustar\x0000")if(this.uname=Ot(e,r+265,32),this.gname=Ot(e,r+297,32),this.devmaj=ht(e,r+329,8),this.devmin=ht(e,r+337,8),e[r+475]!==0){let o=Ot(e,r+345,155);this.path=o+"/"+this.path}else{let o=Ot(e,r+345,130);o&&(this.path=o+"/"+this.path),this.atime=co(e,r+476,12),this.ctime=co(e,r+488,12)}let s=8*32;for(let o=r;o<r+148;o++)s+=e[o];for(let o=r+156;o<r+512;o++)s+=e[o];this.cksumValid=s===this.cksum,this.cksum===null&&s===8*32&&(this.nullBlock=!0)}[ao](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=e[n])}encode(e,r){if(e||(e=this.block=Buffer.alloc(512),r=0),r||(r=0),!(e.length>=r+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,i=jw(this.path||"",n),s=i[0],o=i[1];this.needPax=i[2],this.needPax=It(e,r,100,s)||this.needPax,this.needPax=dt(e,r+100,8,this.mode)||this.needPax,this.needPax=dt(e,r+108,8,this.uid)||this.needPax,this.needPax=dt(e,r+116,8,this.gid)||this.needPax,this.needPax=dt(e,r+124,12,this.size)||this.needPax,this.needPax=lo(e,r+136,12,this.mtime)||this.needPax,e[r+156]=this[oe].charCodeAt(0),this.needPax=It(e,r+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",r+257,8),this.needPax=It(e,r+265,32,this.uname)||this.needPax,this.needPax=It(e,r+297,32,this.gname)||this.needPax,this.needPax=dt(e,r+329,8,this.devmaj)||this.needPax,this.needPax=dt(e,r+337,8,this.devmin)||this.needPax,this.needPax=It(e,r+345,n,o)||this.needPax,e[r+475]!==0?this.needPax=It(e,r+345,155,o)||this.needPax:(this.needPax=It(e,r+345,130,o)||this.needPax,this.needPax=lo(e,r+476,12,this.atime)||this.needPax,this.needPax=lo(e,r+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=r;c<r+148;c++)a+=e[c];for(let c=r+156;c<r+512;c++)a+=e[c];return this.cksum=a,dt(e,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let r in e)e[r]!==null&&e[r]!==void 0&&(this[r]=e[r])}get type(){return oo.name.get(this[oe])||this[oe]}get typeKey(){return this[oe]}set type(e){oo.code.has(e)?this[oe]=oo.code.get(e):this[oe]=e}},jw=(t,e)=>{let n=t,i="",s,o=nr.parse(t).root||".";if(Buffer.byteLength(n)<100)s=[n,i,!1];else{i=nr.dirname(n),n=nr.basename(n);do Buffer.byteLength(n)<=100&&Buffer.byteLength(i)<=e?s=[n,i,!1]:Buffer.byteLength(n)>100&&Buffer.byteLength(i)<=e?s=[n.slice(0,100-1),i,!0]:(n=nr.join(nr.basename(i),n),i=nr.dirname(i));while(i!==o&&!s);s||(s=[t.slice(0,100-1),"",!0])}return s},Ot=(t,e,r)=>t.slice(e,e+r).toString("utf8").replace(/\0.*/,""),co=(t,e,r)=>Ww(ht(t,e,r)),Ww=t=>t===null?null:new Date(t*1e3),ht=(t,e,r)=>t[e]&128?Sl.parse(t.slice(e,e+r)):zw(t,e,r),Gw=t=>isNaN(t)?null:t,zw=(t,e,r)=>Gw(parseInt(t.slice(e,e+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),Vw={12:8589934591,8:2097151},dt=(t,e,r,n)=>n===null?!1:n>Vw[r]||n<0?(Sl.encode(n,t.slice(e,e+r)),!0):(Jw(t,e,r,n),!1),Jw=(t,e,r,n)=>t.write(Yw(n,r),e,r,"ascii"),Yw=(t,e)=>Xw(Math.floor(t).toString(8),e),Xw=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",lo=(t,e,r,n)=>n===null?!1:dt(t,e,r,n.getTime()/1e3),Zw=new Array(156).join("\0"),It=(t,e,r,n)=>n===null?!1:(t.write(n+Zw,e,r,"utf8"),n.length!==Buffer.byteLength(n)||n.length>r);vl.exports=uo});var Wn=p((uR,xl)=>{"use strict";var Kw=ir(),Qw=require("path"),Gr=class{constructor(e,r){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=r||!1}encode(){let e=this.encodeBody();if(e==="")return null;let r=Buffer.byteLength(e),n=512*Math.ceil(1+r/512),i=Buffer.allocUnsafe(n);for(let s=0;s<512;s++)i[s]=0;new Kw({path:("PaxHeader/"+Qw.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:r,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(i),i.write(e,512,r,"utf8");for(let s=r+512;s<i.length;s++)i[s]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let r=this[e]instanceof Date?this[e].getTime()/1e3:this[e],n=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+r+`
`,i=Buffer.byteLength(n),s=Math.floor(Math.log(i)/Math.log(10))+1;return i+s>=Math.pow(10,s)&&(s+=1),s+i+n}};Gr.parse=(t,e,r)=>new Gr(eE(tE(t),e),r);var eE=(t,e)=>e?Object.keys(t).reduce((r,n)=>(r[n]=t[n],r),e):t,tE=t=>t.replace(/\n$/,"").split(`
`).reduce(rE,Object.create(null)),rE=(t,e)=>{let r=parseInt(e,10);if(r!==Buffer.byteLength(e)+1)return t;e=e.slice((r+" ").length);let n=e.split("="),i=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!i)return t;let s=n.join("=");return t[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(s*1e3):/^[0-9]+$/.test(s)?+s:s,t};xl.exports=Gr});var sr=p((fR,bl)=>{bl.exports=t=>{let e=t.length-1,r=-1;for(;e>-1&&t.charAt(e)==="/";)r=e,e--;return r===-1?t:t.slice(0,r)}});var Gn=p((hR,Pl)=>{"use strict";Pl.exports=t=>class extends t{warn(e,r,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=r instanceof Error&&r.code||e,n.tarCode=e,!this.strict&&n.recoverable!==!1?(r instanceof Error&&(n=Object.assign(r,n),r=r.message),this.emit("warn",n.tarCode,r,n)):r instanceof Error?this.emit("error",Object.assign(r,n)):this.emit("error",Object.assign(new Error(`${e}: ${r}`),n))}}});var ho=p((pR,Rl)=>{"use strict";var zn=["|","<",">","?",":"],fo=zn.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),nE=new Map(zn.map((t,e)=>[t,fo[e]])),iE=new Map(fo.map((t,e)=>[t,zn[e]]));Rl.exports={encode:t=>zn.reduce((e,r)=>e.split(r).join(nE.get(r)),t),decode:t=>fo.reduce((e,r)=>e.split(r).join(iE.get(r)),t)}});var po=p((mR,Tl)=>{var{isAbsolute:sE,parse:Ll}=require("path").win32;Tl.exports=t=>{let e="",r=Ll(t);for(;sE(t)||r.root;){let n=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":r.root;t=t.slice(n.length),e+=n,r=Ll(t)}return[e,t]}});var Ol=p((gR,Cl)=>{"use strict";Cl.exports=(t,e,r)=>(t&=4095,r&&(t=(t|384)&-19),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var Po=p((yR,jl)=>{"use strict";var Al=Dn(),Fl=Wn(),ql=ir(),Ne=require("fs"),Il=require("path"),De=rr(),oE=sr(),Bl=(t,e)=>e?(t=De(t).replace(/^\.(\/|$)/,""),oE(e)+"/"+t):De(t),aE=16*1024*1024,_l=Symbol("process"),kl=Symbol("file"),Dl=Symbol("directory"),go=Symbol("symlink"),Nl=Symbol("hardlink"),zr=Symbol("header"),Vn=Symbol("read"),wo=Symbol("lstat"),Jn=Symbol("onlstat"),Eo=Symbol("onread"),yo=Symbol("onreadlink"),So=Symbol("openfile"),vo=Symbol("onopenfile"),pt=Symbol("close"),Yn=Symbol("mode"),xo=Symbol("awaitDrain"),mo=Symbol("ondrain"),$e=Symbol("prefix"),$l=Symbol("hadError"),Ml=Gn(),cE=ho(),Ul=po(),Hl=Ol(),Xn=Ml(class extends Al{constructor(e,r){if(r=r||{},super(r),typeof e!="string")throw new TypeError("path is required");this.path=De(e),this.portable=!!r.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=r.maxReadSize||aE,this.linkCache=r.linkCache||new Map,this.statCache=r.statCache||new Map,this.preservePaths=!!r.preservePaths,this.cwd=De(r.cwd||process.cwd()),this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.mtime=r.mtime||null,this.prefix=r.prefix?De(r.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,s]=Ul(this.path);i&&(this.path=s,n=i)}this.win32=!!r.win32||process.platform==="win32",this.win32&&(this.path=cE.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=De(r.absolute||Il.resolve(this.cwd,e)),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[Jn](this.statCache.get(this.absolute)):this[wo]()}emit(e,...r){return e==="error"&&(this[$l]=!0),super.emit(e,...r)}[wo](){Ne.lstat(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[Jn](r)})}[Jn](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=uE(e),this.emit("stat",e),this[_l]()}[_l](){switch(this.type){case"File":return this[kl]();case"Directory":return this[Dl]();case"SymbolicLink":return this[go]();default:return this.end()}}[Yn](e){return Hl(e,this.type==="Directory",this.portable)}[$e](e){return Bl(e,this.prefix)}[zr](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new ql({path:this[$e](this.path),linkpath:this.type==="Link"?this[$e](this.linkpath):this.linkpath,mode:this[Yn](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new Fl({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[$e](this.path),linkpath:this.type==="Link"?this[$e](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[Dl](){this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[zr](),this.end()}[go](){Ne.readlink(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[yo](r)})}[yo](e){this.linkpath=De(e),this[zr](),this.end()}[Nl](e){this.type="Link",this.linkpath=De(Il.relative(this.cwd,e)),this.stat.size=0,this[zr](),this.end()}[kl](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let r=this.linkCache.get(e);if(r.indexOf(this.cwd)===0)return this[Nl](r)}this.linkCache.set(e,this.absolute)}if(this[zr](),this.stat.size===0)return this.end();this[So]()}[So](){Ne.open(this.absolute,"r",(e,r)=>{if(e)return this.emit("error",e);this[vo](r)})}[vo](e){if(this.fd=e,this[$l])return this[pt]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let r=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(r),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[Vn]()}[Vn](){let{fd:e,buf:r,offset:n,length:i,pos:s}=this;Ne.read(e,r,n,i,s,(o,a)=>{if(o)return this[pt](()=>this.emit("error",o));this[Eo](a)})}[pt](e){Ne.close(this.fd,e)}[Eo](e){if(e<=0&&this.remain>0){let i=new Error("encountered unexpected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[pt](()=>this.emit("error",i))}if(e>this.remain){let i=new Error("did not encounter expected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[pt](()=>this.emit("error",i))}if(e===this.remain)for(let i=e;i<this.length&&e<this.blockRemain;i++)this.buf[i+this.offset]=0,e++,this.remain++;let r=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(r)?this[mo]():this[xo](()=>this[mo]())}[xo](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let r=new Error("writing more data than expected");return r.path=this.absolute,this.emit("error",r)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[mo](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[pt](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[Vn]()}}),bo=class extends Xn{[wo](){this[Jn](Ne.lstatSync(this.absolute))}[go](){this[yo](Ne.readlinkSync(this.absolute))}[So](){this[vo](Ne.openSync(this.absolute,"r"))}[Vn](){let e=!0;try{let{fd:r,buf:n,offset:i,length:s,pos:o}=this,a=Ne.readSync(r,n,i,s,o);this[Eo](a),e=!1}finally{if(e)try{this[pt](()=>{})}catch{}}}[xo](e){e()}[pt](e){Ne.closeSync(this.fd),e()}},lE=Ml(class extends Al{constructor(e,r){r=r||{},super(r),this.preservePaths=!!r.preservePaths,this.portable=!!r.portable,this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=r.prefix||null,this.path=De(e.path),this.mode=this[Yn](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:r.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=De(e.linkpath),typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,s]=Ul(this.path);i&&(this.path=s,n=i)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new ql({path:this[$e](this.path),linkpath:this.type==="Link"?this[$e](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new Fl({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[$e](this.path),linkpath:this.type==="Link"?this[$e](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[$e](e){return Bl(e,this.prefix)}[Yn](e){return Hl(e,this.type==="Directory",this.portable)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});Xn.Sync=bo;Xn.Tar=lE;var uE=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";jl.exports=Xn});var Gl=p((SR,Wl)=>{"use strict";Wl.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Zn=p((vR,zl)=>{"use strict";zl.exports=x;x.Node=_t;x.create=x;function x(t){var e=this;if(e instanceof x||(e=new x),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}x.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};x.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};x.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};x.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)hE(this,arguments[t]);return this.length};x.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)dE(this,arguments[t]);return this.length};x.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};x.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};x.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};x.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};x.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};x.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};x.prototype.map=function(t,e){e=e||this;for(var r=new x,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};x.prototype.mapReverse=function(t,e){e=e||this;for(var r=new x,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};x.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};x.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};x.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};x.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};x.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new x;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};x.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new x;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};x.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var s=[],n=0;i&&n<e;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=fE(this,i,r[n]);return s};x.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function fE(t,e,r){var n=e===t.head?new _t(r,null,e,t):new _t(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function hE(t,e){t.tail=new _t(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function dE(t,e){t.head=new _t(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function _t(t,e,r,n){if(!(this instanceof _t))return new _t(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{Gl()(x)}catch{}});var oi=p((bR,Ql)=>{"use strict";var ii=class{constructor(e,r){this.path=e||"./",this.absolute=r,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},pE=Dn(),mE=ro(),gE=Hn(),Do=Po(),wE=Do.Sync,EE=Do.Tar,yE=Zn(),Vl=Buffer.alloc(1024),ei=Symbol("onStat"),Kn=Symbol("ended"),Ae=Symbol("queue"),or=Symbol("current"),kt=Symbol("process"),Qn=Symbol("processing"),Jl=Symbol("processJob"),Fe=Symbol("jobs"),Ro=Symbol("jobDone"),ti=Symbol("addFSEntry"),Yl=Symbol("addTarEntry"),Oo=Symbol("stat"),Io=Symbol("readdir"),ri=Symbol("onreaddir"),ni=Symbol("pipe"),Xl=Symbol("entry"),Lo=Symbol("entryOpt"),_o=Symbol("writeEntryClass"),Kl=Symbol("write"),To=Symbol("ondrain"),si=require("fs"),Zl=require("path"),SE=Gn(),Co=rr(),No=SE(class extends pE{constructor(e){super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=Co(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[_o]=Do,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip?(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new mE.Gzip(e.gzip),this.zip.on("data",r=>super.write(r)),this.zip.on("end",r=>super.end()),this.zip.on("drain",r=>this[To]()),this.on("resume",r=>this.zip.resume())):this.on("drain",this[To]),this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:r=>!0,this[Ae]=new yE,this[Fe]=0,this.jobs=+e.jobs||4,this[Qn]=!1,this[Kn]=!1}[Kl](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[Kn]=!0,this[kt](),this}write(e){if(this[Kn])throw new Error("write after end");return e instanceof gE?this[Yl](e):this[ti](e),this.flowing}[Yl](e){let r=Co(Zl.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let n=new ii(e.path,r,!1);n.entry=new EE(e,this[Lo](n)),n.entry.on("end",i=>this[Ro](n)),this[Fe]+=1,this[Ae].push(n)}this[kt]()}[ti](e){let r=Co(Zl.resolve(this.cwd,e));this[Ae].push(new ii(e,r)),this[kt]()}[Oo](e){e.pending=!0,this[Fe]+=1;let r=this.follow?"stat":"lstat";si[r](e.absolute,(n,i)=>{e.pending=!1,this[Fe]-=1,n?this.emit("error",n):this[ei](e,i)})}[ei](e,r){this.statCache.set(e.absolute,r),e.stat=r,this.filter(e.path,r)||(e.ignore=!0),this[kt]()}[Io](e){e.pending=!0,this[Fe]+=1,si.readdir(e.absolute,(r,n)=>{if(e.pending=!1,this[Fe]-=1,r)return this.emit("error",r);this[ri](e,n)})}[ri](e,r){this.readdirCache.set(e.absolute,r),e.readdir=r,this[kt]()}[kt](){if(!this[Qn]){this[Qn]=!0;for(let e=this[Ae].head;e!==null&&this[Fe]<this.jobs;e=e.next)if(this[Jl](e.value),e.value.ignore){let r=e.next;this[Ae].removeNode(e),e.next=r}this[Qn]=!1,this[Kn]&&!this[Ae].length&&this[Fe]===0&&(this.zip?this.zip.end(Vl):(super.write(Vl),super.end()))}}get[or](){return this[Ae]&&this[Ae].head&&this[Ae].head.value}[Ro](e){this[Ae].shift(),this[Fe]-=1,this[kt]()}[Jl](e){if(!e.pending){if(e.entry){e===this[or]&&!e.piped&&this[ni](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[ei](e,this.statCache.get(e.absolute)):this[Oo](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[ri](e,this.readdirCache.get(e.absolute)):this[Io](e),!e.readdir))){if(e.entry=this[Xl](e),!e.entry){e.ignore=!0;return}e===this[or]&&!e.piped&&this[ni](e)}}}[Lo](e){return{onwarn:(r,n,i)=>this.warn(r,n,i),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[Xl](e){this[Fe]+=1;try{return new this[_o](e.path,this[Lo](e)).on("end",()=>this[Ro](e)).on("error",r=>this.emit("error",r))}catch(r){this.emit("error",r)}}[To](){this[or]&&this[or].entry&&this[or].entry.resume()}[ni](e){e.piped=!0,e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[ti](o+i)});let r=e.entry,n=this.zip;n?r.on("data",i=>{n.write(i)||r.pause()}):r.on("data",i=>{super.write(i)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),ko=class extends No{constructor(e){super(e),this[_o]=wE}pause(){}resume(){}[Oo](e){let r=this.follow?"statSync":"lstatSync";this[ei](e,si[r](e.absolute))}[Io](e,r){this[ri](e,si.readdirSync(e.absolute))}[ni](e){let r=e.entry,n=this.zip;e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[ti](o+i)}),n?r.on("data",i=>{n.write(i)}):r.on("data",i=>{super[Kl](i)})}};No.Sync=ko;Ql.exports=No});var lu=p((PR,cu)=>{"use strict";var eu=typeof process=="object"&&process?process:{stdout:null,stderr:null},vE=require("events"),tu=require("stream"),ru=require("string_decoder").StringDecoder,Xe=Symbol("EOF"),Ze=Symbol("maybeEmitEnd"),mt=Symbol("emittedEnd"),ai=Symbol("emittingEnd"),Vr=Symbol("emittedError"),ci=Symbol("closed"),nu=Symbol("read"),li=Symbol("flush"),iu=Symbol("flushChunk"),te=Symbol("encoding"),Ke=Symbol("decoder"),ui=Symbol("flowing"),Jr=Symbol("paused"),ar=Symbol("resume"),F=Symbol("bufferLength"),$o=Symbol("bufferPush"),Ao=Symbol("bufferShift"),G=Symbol("objectMode"),z=Symbol("destroyed"),Fo=Symbol("emitData"),su=Symbol("emitEnd"),qo=Symbol("emitEnd2"),Qe=Symbol("async"),Yr=t=>Promise.resolve().then(t),ou=global._MP_NO_ITERATOR_SYMBOLS_!=="1",xE=ou&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),bE=ou&&Symbol.iterator||Symbol("iterator not implemented"),PE=t=>t==="end"||t==="finish"||t==="prefinish",RE=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,LE=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),fi=class{constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[ar](),r.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Bo=class extends fi{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}};cu.exports=class au extends tu{constructor(e){super(),this[ui]=!1,this[Jr]=!1,this.pipes=[],this.buffer=[],this[G]=e&&e.objectMode||!1,this[G]?this[te]=null:this[te]=e&&e.encoding||null,this[te]==="buffer"&&(this[te]=null),this[Qe]=e&&!!e.async||!1,this[Ke]=this[te]?new ru(this[te]):null,this[Xe]=!1,this[mt]=!1,this[ai]=!1,this[ci]=!1,this[Vr]=null,this.writable=!0,this.readable=!0,this[F]=0,this[z]=!1}get bufferLength(){return this[F]}get encoding(){return this[te]}set encoding(e){if(this[G])throw new Error("cannot set encoding in objectMode");if(this[te]&&e!==this[te]&&(this[Ke]&&this[Ke].lastNeed||this[F]))throw new Error("cannot change encoding");this[te]!==e&&(this[Ke]=e?new ru(e):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[Ke].write(r)))),this[te]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[G]}set objectMode(e){this[G]=this[G]||!!e}get async(){return this[Qe]}set async(e){this[Qe]=this[Qe]||!!e}write(e,r,n){if(this[Xe])throw new Error("write after end");if(this[z])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[Qe]?Yr:s=>s();return!this[G]&&!Buffer.isBuffer(e)&&(LE(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):RE(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[G]?(this.flowing&&this[F]!==0&&this[li](!0),this.flowing?this.emit("data",e):this[$o](e),this[F]!==0&&this.emit("readable"),n&&i(n),this.flowing):e.length?(typeof e=="string"&&!(r===this[te]&&!this[Ke].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[te]&&(e=this[Ke].write(e)),this.flowing&&this[F]!==0&&this[li](!0),this.flowing?this.emit("data",e):this[$o](e),this[F]!==0&&this.emit("readable"),n&&i(n),this.flowing):(this[F]!==0&&this.emit("readable"),n&&i(n),this.flowing)}read(e){if(this[z])return null;if(this[F]===0||e===0||e>this[F])return this[Ze](),null;this[G]&&(e=null),this.buffer.length>1&&!this[G]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[F])]);let r=this[nu](e||null,this.buffer[0]);return this[Ze](),r}[nu](e,r){return e===r.length||e===null?this[Ao]():(this.buffer[0]=r.slice(e),r=r.slice(0,e),this[F]-=e),this.emit("data",r),!this.buffer.length&&!this[Xe]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[Xe]=!0,this.writable=!1,(this.flowing||!this[Jr])&&this[Ze](),this}[ar](){this[z]||(this[Jr]=!1,this[ui]=!0,this.emit("resume"),this.buffer.length?this[li]():this[Xe]?this[Ze]():this.emit("drain"))}resume(){return this[ar]()}pause(){this[ui]=!1,this[Jr]=!0}get destroyed(){return this[z]}get flowing(){return this[ui]}get paused(){return this[Jr]}[$o](e){this[G]?this[F]+=1:this[F]+=e.length,this.buffer.push(e)}[Ao](){return this.buffer.length&&(this[G]?this[F]-=1:this[F]-=this.buffer[0].length),this.buffer.shift()}[li](e){do;while(this[iu](this[Ao]()));!e&&!this.buffer.length&&!this[Xe]&&this.emit("drain")}[iu](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,r){if(this[z])return;let n=this[mt];return r=r||{},e===eu.stdout||e===eu.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this.pipes.push(r.proxyErrors?new Bo(this,e,r):new fi(this,e,r)),this[Qe]?Yr(()=>this[ar]()):this[ar]()),e}unpipe(e){let r=this.pipes.find(n=>n.dest===e);r&&(this.pipes.splice(this.pipes.indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);return e==="data"&&!this.pipes.length&&!this.flowing?this[ar]():e==="readable"&&this[F]!==0?super.emit("readable"):PE(e)&&this[mt]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Vr]&&(this[Qe]?Yr(()=>r.call(this,this[Vr])):r.call(this,this[Vr])),n}get emittedEnd(){return this[mt]}[Ze](){!this[ai]&&!this[mt]&&!this[z]&&this.buffer.length===0&&this[Xe]&&(this[ai]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[ci]&&this.emit("close"),this[ai]=!1)}emit(e,r,...n){if(e!=="error"&&e!=="close"&&e!==z&&this[z])return;if(e==="data")return r?this[Qe]?Yr(()=>this[Fo](r)):this[Fo](r):!1;if(e==="end")return this[su]();if(e==="close"){if(this[ci]=!0,!this[mt]&&!this[z])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[Vr]=r;let s=super.emit("error",r);return this[Ze](),s}else if(e==="resume"){let s=super.emit("resume");return this[Ze](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,r,...n);return this[Ze](),i}[Fo](e){for(let n of this.pipes)n.dest.write(e)===!1&&this.pause();let r=super.emit("data",e);return this[Ze](),r}[su](){this[mt]||(this[mt]=!0,this.readable=!1,this[Qe]?Yr(()=>this[qo]()):this[qo]())}[qo](){if(this[Ke]){let r=this[Ke].end();if(r){for(let n of this.pipes)n.dest.write(r);super.emit("data",r)}}for(let r of this.pipes)r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[G]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[G]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[G]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[G]?Promise.reject(new Error("cannot concat in objectMode")):this[te]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(z,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[xE](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[Xe])return Promise.resolve({done:!0});let n=null,i=null,s=l=>{this.removeListener("data",o),this.removeListener("end",a),i(l)},o=l=>{this.removeListener("error",s),this.removeListener("end",a),this.pause(),n({value:l,done:!!this[Xe]})},a=()=>{this.removeListener("error",s),this.removeListener("data",o),n({done:!0})},c=()=>s(new Error("stream destroyed"));return new Promise((l,u)=>{i=u,n=l,this.once(z,c),this.once("error",s),this.once("end",a),this.once("data",o)})}}}[bE](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(e){return this[z]?(e?this.emit("error",e):this.emit(z),this):(this[z]=!0,this.buffer.length=0,this[F]=0,typeof this.close=="function"&&!this[ci]&&this.close(),e?this.emit("error",e):this.emit(z),this)}static isStream(e){return!!e&&(e instanceof au||e instanceof tu||e instanceof vE&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var mr=p(Zr=>{"use strict";var TE=lu(),CE=require("events").EventEmitter,re=require("fs"),Ho=re.writev;if(!Ho){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;Ho=(r,n,i,s)=>{let o=(c,l)=>s(c,l,n),a=new e;a.oncomplete=o,t.writeBuffers(r,n,i,a)}}var dr=Symbol("_autoClose"),be=Symbol("_close"),Xr=Symbol("_ended"),R=Symbol("_fd"),uu=Symbol("_finished"),wt=Symbol("_flags"),Mo=Symbol("_flush"),jo=Symbol("_handleChunk"),Wo=Symbol("_makeBuf"),gi=Symbol("_mode"),hi=Symbol("_needDrain"),fr=Symbol("_onerror"),pr=Symbol("_onopen"),Uo=Symbol("_onread"),lr=Symbol("_onwrite"),Et=Symbol("_open"),et=Symbol("_path"),Dt=Symbol("_pos"),qe=Symbol("_queue"),ur=Symbol("_read"),fu=Symbol("_readSize"),gt=Symbol("_reading"),di=Symbol("_remain"),hu=Symbol("_size"),pi=Symbol("_write"),cr=Symbol("_writing"),mi=Symbol("_defaultFlag"),hr=Symbol("_errored"),wi=class extends TE{constructor(e,r){if(r=r||{},super(r),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[hr]=!1,this[R]=typeof r.fd=="number"?r.fd:null,this[et]=e,this[fu]=r.readSize||16*1024*1024,this[gt]=!1,this[hu]=typeof r.size=="number"?r.size:1/0,this[di]=this[hu],this[dr]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[R]=="number"?this[ur]():this[Et]()}get fd(){return this[R]}get path(){return this[et]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[Et](){re.open(this[et],"r",(e,r)=>this[pr](e,r))}[pr](e,r){e?this[fr](e):(this[R]=r,this.emit("open",r),this[ur]())}[Wo](){return Buffer.allocUnsafe(Math.min(this[fu],this[di]))}[ur](){if(!this[gt]){this[gt]=!0;let e=this[Wo]();if(e.length===0)return process.nextTick(()=>this[Uo](null,0,e));re.read(this[R],e,0,e.length,null,(r,n,i)=>this[Uo](r,n,i))}}[Uo](e,r,n){this[gt]=!1,e?this[fr](e):this[jo](r,n)&&this[ur]()}[be](){if(this[dr]&&typeof this[R]=="number"){let e=this[R];this[R]=null,re.close(e,r=>r?this.emit("error",r):this.emit("close"))}}[fr](e){this[gt]=!0,this[be](),this.emit("error",e)}[jo](e,r){let n=!1;return this[di]-=e,e>0&&(n=super.write(e<r.length?r.slice(0,e):r)),(e===0||this[di]<=0)&&(n=!1,this[be](),super.end()),n}emit(e,r){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[R]=="number"&&this[ur]();break;case"error":return this[hr]?void 0:(this[hr]=!0,super.emit(e,r));default:return super.emit(e,r)}}},Go=class extends wi{[Et](){let e=!0;try{this[pr](null,re.openSync(this[et],"r")),e=!1}finally{e&&this[be]()}}[ur](){let e=!0;try{if(!this[gt]){this[gt]=!0;do{let r=this[Wo](),n=r.length===0?0:re.readSync(this[R],r,0,r.length,null);if(!this[jo](n,r))break}while(!0);this[gt]=!1}e=!1}finally{e&&this[be]()}}[be](){if(this[dr]&&typeof this[R]=="number"){let e=this[R];this[R]=null,re.closeSync(e),this.emit("close")}}},Ei=class extends CE{constructor(e,r){r=r||{},super(r),this.readable=!1,this.writable=!0,this[hr]=!1,this[cr]=!1,this[Xr]=!1,this[hi]=!1,this[qe]=[],this[et]=e,this[R]=typeof r.fd=="number"?r.fd:null,this[gi]=r.mode===void 0?438:r.mode,this[Dt]=typeof r.start=="number"?r.start:null,this[dr]=typeof r.autoClose=="boolean"?r.autoClose:!0;let n=this[Dt]!==null?"r+":"w";this[mi]=r.flags===void 0,this[wt]=this[mi]?n:r.flags,this[R]===null&&this[Et]()}emit(e,r){if(e==="error"){if(this[hr])return;this[hr]=!0}return super.emit(e,r)}get fd(){return this[R]}get path(){return this[et]}[fr](e){this[be](),this[cr]=!0,this.emit("error",e)}[Et](){re.open(this[et],this[wt],this[gi],(e,r)=>this[pr](e,r))}[pr](e,r){this[mi]&&this[wt]==="r+"&&e&&e.code==="ENOENT"?(this[wt]="w",this[Et]()):e?this[fr](e):(this[R]=r,this.emit("open",r),this[Mo]())}end(e,r){return e&&this.write(e,r),this[Xr]=!0,!this[cr]&&!this[qe].length&&typeof this[R]=="number"&&this[lr](null,0),this}write(e,r){return typeof e=="string"&&(e=Buffer.from(e,r)),this[Xr]?(this.emit("error",new Error("write() after end()")),!1):this[R]===null||this[cr]||this[qe].length?(this[qe].push(e),this[hi]=!0,!1):(this[cr]=!0,this[pi](e),!0)}[pi](e){re.write(this[R],e,0,e.length,this[Dt],(r,n)=>this[lr](r,n))}[lr](e,r){e?this[fr](e):(this[Dt]!==null&&(this[Dt]+=r),this[qe].length?this[Mo]():(this[cr]=!1,this[Xr]&&!this[uu]?(this[uu]=!0,this[be](),this.emit("finish")):this[hi]&&(this[hi]=!1,this.emit("drain"))))}[Mo](){if(this[qe].length===0)this[Xr]&&this[lr](null,0);else if(this[qe].length===1)this[pi](this[qe].pop());else{let e=this[qe];this[qe]=[],Ho(this[R],e,this[Dt],(r,n)=>this[lr](r,n))}}[be](){if(this[dr]&&typeof this[R]=="number"){let e=this[R];this[R]=null,re.close(e,r=>r?this.emit("error",r):this.emit("close"))}}},zo=class extends Ei{[Et](){let e;if(this[mi]&&this[wt]==="r+")try{e=re.openSync(this[et],this[wt],this[gi])}catch(r){if(r.code==="ENOENT")return this[wt]="w",this[Et]();throw r}else e=re.openSync(this[et],this[wt],this[gi]);this[pr](null,e)}[be](){if(this[dr]&&typeof this[R]=="number"){let e=this[R];this[R]=null,re.closeSync(e),this.emit("close")}}[pi](e){let r=!0;try{this[lr](null,re.writeSync(this[R],e,0,e.length,this[Dt])),r=!1}finally{if(r)try{this[be]()}catch{}}}};Zr.ReadStream=wi;Zr.ReadStreamSync=Go;Zr.WriteStream=Ei;Zr.WriteStreamSync=zo});var Ri=p((TR,Su)=>{"use strict";var OE=Gn(),IE=ir(),_E=require("events"),kE=Zn(),DE=1024*1024,NE=Hn(),du=Wn(),$E=ro(),{nextTick:AE}=require("process"),Vo=Buffer.from([31,139]),de=Symbol("state"),Nt=Symbol("writeEntry"),tt=Symbol("readEntry"),Jo=Symbol("nextEntry"),pu=Symbol("processEntry"),pe=Symbol("extendedHeader"),Kr=Symbol("globalExtendedHeader"),yt=Symbol("meta"),mu=Symbol("emitMeta"),T=Symbol("buffer"),rt=Symbol("queue"),$t=Symbol("ended"),gu=Symbol("emittedEnd"),At=Symbol("emit"),ne=Symbol("unzip"),yi=Symbol("consumeChunk"),Si=Symbol("consumeChunkSub"),Yo=Symbol("consumeBody"),wu=Symbol("consumeMeta"),Eu=Symbol("consumeHeader"),vi=Symbol("consuming"),Xo=Symbol("bufferConcat"),Zo=Symbol("maybeEnd"),Qr=Symbol("writing"),St=Symbol("aborted"),xi=Symbol("onDone"),Ft=Symbol("sawValidEntry"),bi=Symbol("sawNullBlock"),Pi=Symbol("sawEOF"),yu=Symbol("closeStream"),FE=t=>!0;Su.exports=OE(class extends _E{constructor(e){e=e||{},super(e),this.file=e.file||"",this[Ft]=null,this.on(xi,r=>{(this[de]==="begin"||this[Ft]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(xi,e.ondone):this.on(xi,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||DE,this.filter=typeof e.filter=="function"?e.filter:FE,this.writable=!0,this.readable=!1,this[rt]=new kE,this[T]=null,this[tt]=null,this[Nt]=null,this[de]="begin",this[yt]="",this[pe]=null,this[Kr]=null,this[$t]=!1,this[ne]=null,this[St]=!1,this[bi]=!1,this[Pi]=!1,this.on("end",()=>this[yu]()),typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[Eu](e,r){this[Ft]===null&&(this[Ft]=!1);let n;try{n=new IE(e,r,this[pe],this[Kr])}catch(i){return this.warn("TAR_ENTRY_INVALID",i)}if(n.nullBlock)this[bi]?(this[Pi]=!0,this[de]==="begin"&&(this[de]="header"),this[At]("eof")):(this[bi]=!0,this[At]("nullBlock"));else if(this[bi]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let i=n.type;if(/^(Symbolic)?Link$/.test(i)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(i)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let s=this[Nt]=new NE(n,this[pe],this[Kr]);if(!this[Ft])if(s.remain){let o=()=>{s.invalid||(this[Ft]=!0)};s.on("end",o)}else this[Ft]=!0;s.meta?s.size>this.maxMetaEntrySize?(s.ignore=!0,this[At]("ignoredEntry",s),this[de]="ignore",s.resume()):s.size>0&&(this[yt]="",s.on("data",o=>this[yt]+=o),this[de]="meta"):(this[pe]=null,s.ignore=s.ignore||!this.filter(s.path,s),s.ignore?(this[At]("ignoredEntry",s),this[de]=s.remain?"ignore":"header",s.resume()):(s.remain?this[de]="body":(this[de]="header",s.end()),this[tt]?this[rt].push(s):(this[rt].push(s),this[Jo]())))}}}[yu](){AE(()=>this.emit("close"))}[pu](e){let r=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[tt]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",n=>this[Jo]()),r=!1)):(this[tt]=null,r=!1),r}[Jo](){do;while(this[pu](this[rt].shift()));if(!this[rt].length){let e=this[tt];!e||e.flowing||e.size===e.remain?this[Qr]||this.emit("drain"):e.once("drain",n=>this.emit("drain"))}}[Yo](e,r){let n=this[Nt],i=n.blockRemain,s=i>=e.length&&r===0?e:e.slice(r,r+i);return n.write(s),n.blockRemain||(this[de]="header",this[Nt]=null,n.end()),s.length}[wu](e,r){let n=this[Nt],i=this[Yo](e,r);return this[Nt]||this[mu](n),i}[At](e,r,n){!this[rt].length&&!this[tt]?this.emit(e,r,n):this[rt].push([e,r,n])}[mu](e){switch(this[At]("meta",this[yt]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[pe]=du.parse(this[yt],this[pe],!1);break;case"GlobalExtendedHeader":this[Kr]=du.parse(this[yt],this[Kr],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[pe]=this[pe]||Object.create(null),this[pe].path=this[yt].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[pe]=this[pe]||Object.create(null),this[pe].linkpath=this[yt].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[St]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[St])return;if(this[ne]===null&&e){if(this[T]&&(e=Buffer.concat([this[T],e]),this[T]=null),e.length<Vo.length)return this[T]=e,!0;for(let n=0;this[ne]===null&&n<Vo.length;n++)e[n]!==Vo[n]&&(this[ne]=!1);if(this[ne]===null){let n=this[$t];this[$t]=!1,this[ne]=new $E.Unzip,this[ne].on("data",s=>this[yi](s)),this[ne].on("error",s=>this.abort(s)),this[ne].on("end",s=>{this[$t]=!0,this[yi]()}),this[Qr]=!0;let i=this[ne][n?"end":"write"](e);return this[Qr]=!1,i}}this[Qr]=!0,this[ne]?this[ne].write(e):this[yi](e),this[Qr]=!1;let r=this[rt].length?!1:this[tt]?this[tt].flowing:!0;return!r&&!this[rt].length&&this[tt].once("drain",n=>this.emit("drain")),r}[Xo](e){e&&!this[St]&&(this[T]=this[T]?Buffer.concat([this[T],e]):e)}[Zo](){if(this[$t]&&!this[gu]&&!this[St]&&!this[vi]){this[gu]=!0;let e=this[Nt];if(e&&e.blockRemain){let r=this[T]?this[T].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${r} available)`,{entry:e}),this[T]&&e.write(this[T]),e.end()}this[At](xi)}}[yi](e){if(this[vi])this[Xo](e);else if(!e&&!this[T])this[Zo]();else{if(this[vi]=!0,this[T]){this[Xo](e);let r=this[T];this[T]=null,this[Si](r)}else this[Si](e);for(;this[T]&&this[T].length>=512&&!this[St]&&!this[Pi];){let r=this[T];this[T]=null,this[Si](r)}this[vi]=!1}(!this[T]||this[$t])&&this[Zo]()}[Si](e){let r=0,n=e.length;for(;r+512<=n&&!this[St]&&!this[Pi];)switch(this[de]){case"begin":case"header":this[Eu](e,r),r+=512;break;case"ignore":case"body":r+=this[Yo](e,r);break;case"meta":r+=this[wu](e,r);break;default:throw new Error("invalid state: "+this[de])}r<n&&(this[T]?this[T]=Buffer.concat([e.slice(r),this[T]]):this[T]=e.slice(r))}end(e){this[St]||(this[ne]?this[ne].end(e):(this[$t]=!0,this.write(e)))}})});var Li=p((CR,Pu)=>{"use strict";var qE=Zt(),xu=Ri(),gr=require("fs"),BE=mr(),vu=require("path"),Ko=sr();Pu.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=qE(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&UE(n,e),n.noResume||ME(n),n.file&&n.sync?HE(n):n.file?jE(n,r):bu(n)};var ME=t=>{let e=t.onentry;t.onentry=e?r=>{e(r),r.resume()}:r=>r.resume()},UE=(t,e)=>{let r=new Map(e.map(s=>[Ko(s),!0])),n=t.filter,i=(s,o)=>{let a=o||vu.parse(s).root||".",c=s===a?!1:r.has(s)?r.get(s):i(vu.dirname(s),a);return r.set(s,c),c};t.filter=n?(s,o)=>n(s,o)&&i(Ko(s)):s=>i(Ko(s))},HE=t=>{let e=bu(t),r=t.file,n=!0,i;try{let s=gr.statSync(r),o=t.maxReadSize||16*1024*1024;if(s.size<o)e.end(gr.readFileSync(r));else{let a=0,c=Buffer.allocUnsafe(o);for(i=gr.openSync(r,"r");a<s.size;){let l=gr.readSync(i,c,0,o,a);a+=l,e.write(c.slice(0,l))}e.end()}n=!1}finally{if(n&&i)try{gr.closeSync(i)}catch{}}},jE=(t,e)=>{let r=new xu(t),n=t.maxReadSize||16*1024*1024,i=t.file,s=new Promise((o,a)=>{r.on("error",a),r.on("end",o),gr.stat(i,(c,l)=>{if(c)a(c);else{let u=new BE.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(r)}})});return e?s.then(e,e):s},bu=t=>new xu(t)});var Iu=p((OR,Ou)=>{"use strict";var WE=Zt(),Ti=oi(),Ru=mr(),Lu=Li(),Tu=require("path");Ou.exports=(t,e,r)=>{if(typeof e=="function"&&(r=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let n=WE(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return n.file&&n.sync?GE(n,e):n.file?zE(n,e,r):n.sync?VE(n,e):JE(n,e)};var GE=(t,e)=>{let r=new Ti.Sync(t),n=new Ru.WriteStreamSync(t.file,{mode:t.mode||438});r.pipe(n),Cu(r,e)},zE=(t,e,r)=>{let n=new Ti(t),i=new Ru.WriteStream(t.file,{mode:t.mode||438});n.pipe(i);let s=new Promise((o,a)=>{i.on("error",a),i.on("close",o),n.on("error",a)});return Qo(n,e),r?s.then(r,r):s},Cu=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?Lu({file:Tu.resolve(t.cwd,r.slice(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},Qo=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return Lu({file:Tu.resolve(t.cwd,r.slice(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>Qo(t,e));t.add(r)}t.end()},VE=(t,e)=>{let r=new Ti.Sync(t);return Cu(r,e),r},JE=(t,e)=>{let r=new Ti(t);return Qo(r,e),r}});var ea=p((IR,Fu)=>{"use strict";var YE=Zt(),_u=oi(),ae=require("fs"),ku=mr(),Du=Li(),Nu=require("path"),$u=ir();Fu.exports=(t,e,r)=>{let n=YE(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),n.sync?XE(n,e):KE(n,e,r)};var XE=(t,e)=>{let r=new _u.Sync(t),n=!0,i,s;try{try{i=ae.openSync(t.file,"r+")}catch(c){if(c.code==="ENOENT")i=ae.openSync(t.file,"w+");else throw c}let o=ae.fstatSync(i),a=Buffer.alloc(512);e:for(s=0;s<o.size;s+=512){for(let u=0,f=0;u<512;u+=f){if(f=ae.readSync(i,a,u,a.length-u,s+u),s===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!f)break e}let c=new $u(a);if(!c.cksumValid)break;let l=512*Math.ceil(c.size/512);if(s+l+512>o.size)break;s+=l,t.mtimeCache&&t.mtimeCache.set(c.path,c.mtime)}n=!1,ZE(t,r,s,i,e)}finally{if(n)try{ae.closeSync(i)}catch{}}},ZE=(t,e,r,n,i)=>{let s=new ku.WriteStreamSync(t.file,{fd:n,start:r});e.pipe(s),QE(e,i)},KE=(t,e,r)=>{e=Array.from(e);let n=new _u(t),i=(o,a,c)=>{let l=(g,S)=>{g?ae.close(o,w=>c(g)):c(null,S)},u=0;if(a===0)return l(null,0);let f=0,d=Buffer.alloc(512),h=(g,S)=>{if(g)return l(g);if(f+=S,f<512&&S)return ae.read(o,d,f,d.length-f,u+f,h);if(u===0&&d[0]===31&&d[1]===139)return l(new Error("cannot append to compressed archives"));if(f<512)return l(null,u);let w=new $u(d);if(!w.cksumValid)return l(null,u);let m=512*Math.ceil(w.size/512);if(u+m+512>a||(u+=m+512,u>=a))return l(null,u);t.mtimeCache&&t.mtimeCache.set(w.path,w.mtime),f=0,ae.read(o,d,0,512,u,h)};ae.read(o,d,0,512,u,h)},s=new Promise((o,a)=>{n.on("error",a);let c="r+",l=(u,f)=>{if(u&&u.code==="ENOENT"&&c==="r+")return c="w+",ae.open(t.file,c,l);if(u)return a(u);ae.fstat(f,(d,h)=>{if(d)return ae.close(f,()=>a(d));i(f,h.size,(g,S)=>{if(g)return a(g);let w=new ku.WriteStream(t.file,{fd:f,start:S});n.pipe(w),w.on("error",a),w.on("close",o),Au(n,e)})})};ae.open(t.file,c,l)});return r?s.then(r,r):s},QE=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?Du({file:Nu.resolve(t.cwd,r.slice(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},Au=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return Du({file:Nu.resolve(t.cwd,r.slice(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>Au(t,e));t.add(r)}t.end()}});var Bu=p((_R,qu)=>{"use strict";var ey=Zt(),ty=ea();qu.exports=(t,e,r)=>{let n=ey(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),ry(n),ty(n,e,r)};var ry=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(r,n)=>e(r,n)&&!(t.mtimeCache.get(r)>n.mtime):(r,n)=>!(t.mtimeCache.get(r)>n.mtime)}});var Hu=p((kR,Uu)=>{var{promisify:Mu}=require("util"),vt=require("fs"),ny=t=>{if(!t)t={mode:511,fs:vt};else if(typeof t=="object")t={mode:511,fs:vt,...t};else if(typeof t=="number")t={mode:t,fs:vt};else if(typeof t=="string")t={mode:parseInt(t,8),fs:vt};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||vt.mkdir,t.mkdirAsync=Mu(t.mkdir),t.stat=t.stat||t.fs.stat||vt.stat,t.statAsync=Mu(t.stat),t.statSync=t.statSync||t.fs.statSync||vt.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||vt.mkdirSync,t};Uu.exports=ny});var Wu=p((DR,ju)=>{var iy=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:sy,parse:oy}=require("path"),ay=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=sy(t),iy==="win32"){let e=/[*|"<>?:]/,{root:r}=oy(t);if(e.test(t.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};ju.exports=ay});var Yu=p((NR,Ju)=>{var{dirname:Gu}=require("path"),zu=(t,e,r=void 0)=>r===e?Promise.resolve():t.statAsync(e).then(n=>n.isDirectory()?r:void 0,n=>n.code==="ENOENT"?zu(t,Gu(e),e):void 0),Vu=(t,e,r=void 0)=>{if(r!==e)try{return t.statSync(e).isDirectory()?r:void 0}catch(n){return n.code==="ENOENT"?Vu(t,Gu(e),e):void 0}};Ju.exports={findMade:zu,findMadeSync:Vu}});var na=p(($R,Zu)=>{var{dirname:Xu}=require("path"),ta=(t,e,r)=>{e.recursive=!1;let n=Xu(t);return n===t?e.mkdirAsync(t,e).catch(i=>{if(i.code!=="EISDIR")throw i}):e.mkdirAsync(t,e).then(()=>r||t,i=>{if(i.code==="ENOENT")return ta(n,e).then(s=>ta(t,e,s));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;return e.statAsync(t).then(s=>{if(s.isDirectory())return r;throw i},()=>{throw i})})},ra=(t,e,r)=>{let n=Xu(t);if(e.recursive=!1,n===t)try{return e.mkdirSync(t,e)}catch(i){if(i.code!=="EISDIR")throw i;return}try{return e.mkdirSync(t,e),r||t}catch(i){if(i.code==="ENOENT")return ra(t,e,ra(n,e,r));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(!e.statSync(t).isDirectory())throw i}catch{throw i}}};Zu.exports={mkdirpManual:ta,mkdirpManualSync:ra}});var ef=p((AR,Qu)=>{var{dirname:Ku}=require("path"),{findMade:cy,findMadeSync:ly}=Yu(),{mkdirpManual:uy,mkdirpManualSync:fy}=na(),hy=(t,e)=>(e.recursive=!0,Ku(t)===t?e.mkdirAsync(t,e):cy(e,t).then(n=>e.mkdirAsync(t,e).then(()=>n).catch(i=>{if(i.code==="ENOENT")return uy(t,e);throw i}))),dy=(t,e)=>{if(e.recursive=!0,Ku(t)===t)return e.mkdirSync(t,e);let n=ly(e,t);try{return e.mkdirSync(t,e),n}catch(i){if(i.code==="ENOENT")return fy(t,e);throw i}};Qu.exports={mkdirpNative:hy,mkdirpNativeSync:dy}});var sf=p((FR,nf)=>{var tf=require("fs"),py=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,ia=py.replace(/^v/,"").split("."),rf=+ia[0]>10||+ia[0]==10&&+ia[1]>=12,my=rf?t=>t.mkdir===tf.mkdir:()=>!1,gy=rf?t=>t.mkdirSync===tf.mkdirSync:()=>!1;nf.exports={useNative:my,useNativeSync:gy}});var ff=p((qR,uf)=>{var wr=Hu(),Er=Wu(),{mkdirpNative:of,mkdirpNativeSync:af}=ef(),{mkdirpManual:cf,mkdirpManualSync:lf}=na(),{useNative:wy,useNativeSync:Ey}=sf(),yr=(t,e)=>(t=Er(t),e=wr(e),wy(e)?of(t,e):cf(t,e)),yy=(t,e)=>(t=Er(t),e=wr(e),Ey(e)?af(t,e):lf(t,e));yr.sync=yy;yr.native=(t,e)=>of(Er(t),wr(e));yr.manual=(t,e)=>cf(Er(t),wr(e));yr.nativeSync=(t,e)=>af(Er(t),wr(e));yr.manualSync=(t,e)=>lf(Er(t),wr(e));uf.exports=yr});var Ef=p((BR,wf)=>{"use strict";var me=require("fs"),qt=require("path"),Sy=me.lchown?"lchown":"chown",vy=me.lchownSync?"lchownSync":"chownSync",df=me.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),hf=(t,e,r)=>{try{return me[vy](t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},xy=(t,e,r)=>{try{return me.chownSync(t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},by=df?(t,e,r,n)=>i=>{!i||i.code!=="EISDIR"?n(i):me.chown(t,e,r,n)}:(t,e,r,n)=>n,sa=df?(t,e,r)=>{try{return hf(t,e,r)}catch(n){if(n.code!=="EISDIR")throw n;xy(t,e,r)}}:(t,e,r)=>hf(t,e,r),Py=process.version,pf=(t,e,r)=>me.readdir(t,e,r),Ry=(t,e)=>me.readdirSync(t,e);/^v4\./.test(Py)&&(pf=(t,e,r)=>me.readdir(t,r));var Ci=(t,e,r,n)=>{me[Sy](t,e,r,by(t,e,r,i=>{n(i&&i.code!=="ENOENT"?i:null)}))},mf=(t,e,r,n,i)=>{if(typeof e=="string")return me.lstat(qt.resolve(t,e),(s,o)=>{if(s)return i(s.code!=="ENOENT"?s:null);o.name=e,mf(t,o,r,n,i)});if(e.isDirectory())oa(qt.resolve(t,e.name),r,n,s=>{if(s)return i(s);let o=qt.resolve(t,e.name);Ci(o,r,n,i)});else{let s=qt.resolve(t,e.name);Ci(s,r,n,i)}},oa=(t,e,r,n)=>{pf(t,{withFileTypes:!0},(i,s)=>{if(i){if(i.code==="ENOENT")return n();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return n(i)}if(i||!s.length)return Ci(t,e,r,n);let o=s.length,a=null,c=l=>{if(!a){if(l)return n(a=l);if(--o===0)return Ci(t,e,r,n)}};s.forEach(l=>mf(t,l,e,r,c))})},Ly=(t,e,r,n)=>{if(typeof e=="string")try{let i=me.lstatSync(qt.resolve(t,e));i.name=e,e=i}catch(i){if(i.code==="ENOENT")return;throw i}e.isDirectory()&&gf(qt.resolve(t,e.name),r,n),sa(qt.resolve(t,e.name),r,n)},gf=(t,e,r)=>{let n;try{n=Ry(t,{withFileTypes:!0})}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR"||i.code==="ENOTSUP")return sa(t,e,r);throw i}return n&&n.length&&n.forEach(i=>Ly(t,i,e,r)),sa(t,e,r)};wf.exports=oa;oa.sync=gf});var xf=p((MR,aa)=>{"use strict";var yf=ff(),ge=require("fs"),Oi=require("path"),Sf=Ef(),Pe=rr(),Ii=class extends Error{constructor(e,r){super("Cannot extract through symbolic link"),this.path=r,this.symlink=e}get name(){return"SylinkError"}},_i=class extends Error{constructor(e,r){super(r+": Cannot cd into '"+e+"'"),this.path=e,this.code=r}get name(){return"CwdError"}},ki=(t,e)=>t.get(Pe(e)),en=(t,e,r)=>t.set(Pe(e),r),Ty=(t,e)=>{ge.stat(t,(r,n)=>{(r||!n.isDirectory())&&(r=new _i(t,r&&r.code||"ENOTDIR")),e(r)})};aa.exports=(t,e,r)=>{t=Pe(t);let n=e.umask,i=e.mode|448,s=(i&n)!==0,o=e.uid,a=e.gid,c=typeof o=="number"&&typeof a=="number"&&(o!==e.processUid||a!==e.processGid),l=e.preserve,u=e.unlink,f=e.cache,d=Pe(e.cwd),h=(w,m)=>{w?r(w):(en(f,t,!0),m&&c?Sf(m,o,a,P=>h(P)):s?ge.chmod(t,i,r):r())};if(f&&ki(f,t)===!0)return h();if(t===d)return Ty(t,h);if(l)return yf(t,{mode:i}).then(w=>h(null,w),h);let S=Pe(Oi.relative(d,t)).split("/");Di(d,S,i,f,u,d,null,h)};var Di=(t,e,r,n,i,s,o,a)=>{if(!e.length)return a(null,o);let c=e.shift(),l=Pe(Oi.resolve(t+"/"+c));if(ki(n,l))return Di(l,e,r,n,i,s,o,a);ge.mkdir(l,r,vf(l,e,r,n,i,s,o,a))},vf=(t,e,r,n,i,s,o,a)=>c=>{c?ge.lstat(t,(l,u)=>{if(l)l.path=l.path&&Pe(l.path),a(l);else if(u.isDirectory())Di(t,e,r,n,i,s,o,a);else if(i)ge.unlink(t,f=>{if(f)return a(f);ge.mkdir(t,r,vf(t,e,r,n,i,s,o,a))});else{if(u.isSymbolicLink())return a(new Ii(t,t+"/"+e.join("/")));a(c)}}):(o=o||t,Di(t,e,r,n,i,s,o,a))},Cy=t=>{let e=!1,r="ENOTDIR";try{e=ge.statSync(t).isDirectory()}catch(n){r=n.code}finally{if(!e)throw new _i(t,r)}};aa.exports.sync=(t,e)=>{t=Pe(t);let r=e.umask,n=e.mode|448,i=(n&r)!==0,s=e.uid,o=e.gid,a=typeof s=="number"&&typeof o=="number"&&(s!==e.processUid||o!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,f=Pe(e.cwd),d=w=>{en(u,t,!0),w&&a&&Sf.sync(w,s,o),i&&ge.chmodSync(t,n)};if(u&&ki(u,t)===!0)return d();if(t===f)return Cy(f),d();if(c)return d(yf.sync(t,n));let g=Pe(Oi.relative(f,t)).split("/"),S=null;for(let w=g.shift(),m=f;w&&(m+="/"+w);w=g.shift())if(m=Pe(Oi.resolve(m)),!ki(u,m))try{ge.mkdirSync(m,n),S=S||m,en(u,m,!0)}catch{let k=ge.lstatSync(m);if(k.isDirectory()){en(u,m,!0);continue}else if(l){ge.unlinkSync(m),ge.mkdirSync(m,n),S=S||m,en(u,m,!0);continue}else if(k.isSymbolicLink())return new Ii(m,m+"/"+g.join("/"))}return d(S)}});var la=p((UR,bf)=>{var ca=Object.create(null),{hasOwnProperty:Oy}=Object.prototype;bf.exports=t=>(Oy.call(ca,t)||(ca[t]=t.normalize("NFKD")),ca[t])});var Tf=p((HR,Lf)=>{var Pf=require("assert"),Iy=la(),_y=sr(),{join:Rf}=require("path"),ky=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Dy=ky==="win32";Lf.exports=()=>{let t=new Map,e=new Map,r=l=>l.split("/").slice(0,-1).reduce((f,d)=>(f.length&&(d=Rf(f[f.length-1],d)),f.push(d||"/"),f),[]),n=new Set,i=l=>{let u=e.get(l);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(f=>t.get(f)),dirs:[...u.dirs].map(f=>t.get(f))}},s=l=>{let{paths:u,dirs:f}=i(l);return u.every(d=>d[0]===l)&&f.every(d=>d[0]instanceof Set&&d[0].has(l))},o=l=>n.has(l)||!s(l)?!1:(n.add(l),l(()=>a(l)),!0),a=l=>{if(!n.has(l))return!1;let{paths:u,dirs:f}=e.get(l),d=new Set;return u.forEach(h=>{let g=t.get(h);Pf.equal(g[0],l),g.length===1?t.delete(h):(g.shift(),typeof g[0]=="function"?d.add(g[0]):g[0].forEach(S=>d.add(S)))}),f.forEach(h=>{let g=t.get(h);Pf(g[0]instanceof Set),g[0].size===1&&g.length===1?t.delete(h):g[0].size===1?(g.shift(),d.add(g[0])):g[0].delete(l)}),n.delete(l),d.forEach(h=>o(h)),!0};return{check:s,reserve:(l,u)=>{l=Dy?["win32 parallelization disabled"]:l.map(d=>Iy(_y(Rf(d))).toLowerCase());let f=new Set(l.map(d=>r(d)).reduce((d,h)=>d.concat(h)));return e.set(u,{dirs:f,paths:l}),l.forEach(d=>{let h=t.get(d);h?h.push(u):t.set(d,[u])}),f.forEach(d=>{let h=t.get(d);h?h[h.length-1]instanceof Set?h[h.length-1].add(u):h.push(new Set([u])):t.set(d,[new Set([u])])}),o(u)}}}});var If=p((jR,Of)=>{var Ny=process.env.__FAKE_PLATFORM__||process.platform,$y=Ny==="win32",Ay=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:Fy,O_TRUNC:qy,O_WRONLY:By,UV_FS_O_FILEMAP:Cf=0}=Ay.constants,My=$y&&!!Cf,Uy=512*1024,Hy=Cf|qy|Fy|By;Of.exports=My?t=>t<Uy?Hy:"w":()=>"w"});var Ea=p((WR,Wf)=>{"use strict";var jy=require("assert"),Wy=Ri(),b=require("fs"),Gy=mr(),nt=require("path"),Uf=xf(),_f=ho(),zy=Tf(),Vy=po(),ce=rr(),Jy=sr(),Yy=la(),kf=Symbol("onEntry"),ha=Symbol("checkFs"),Df=Symbol("checkFs2"),Ai=Symbol("pruneCache"),da=Symbol("isReusable"),we=Symbol("makeFs"),pa=Symbol("file"),ma=Symbol("directory"),Fi=Symbol("link"),Nf=Symbol("symlink"),$f=Symbol("hardlink"),Af=Symbol("unsupported"),Ff=Symbol("checkPath"),xt=Symbol("mkdir"),V=Symbol("onError"),Ni=Symbol("pending"),qf=Symbol("pend"),Sr=Symbol("unpend"),ua=Symbol("ended"),fa=Symbol("maybeClose"),ga=Symbol("skip"),tn=Symbol("doChown"),rn=Symbol("uid"),nn=Symbol("gid"),sn=Symbol("checkedCwd"),Hf=require("crypto"),jf=If(),Xy=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,on=Xy==="win32",Zy=(t,e)=>{if(!on)return b.unlink(t,e);let r=t+".DELETE."+Hf.randomBytes(16).toString("hex");b.rename(t,r,n=>{if(n)return e(n);b.unlink(r,e)})},Ky=t=>{if(!on)return b.unlinkSync(t);let e=t+".DELETE."+Hf.randomBytes(16).toString("hex");b.renameSync(t,e),b.unlinkSync(e)},Bf=(t,e,r)=>t===t>>>0?t:e===e>>>0?e:r,Mf=t=>Yy(Jy(ce(t))).toLowerCase(),Qy=(t,e)=>{e=Mf(e);for(let r of t.keys()){let n=Mf(r);(n===e||n.indexOf(e+"/")===0)&&t.delete(r)}},eS=t=>{for(let e of t.keys())t.delete(e)},an=class extends Wy{constructor(e){if(e||(e={}),e.ondone=r=>{this[ua]=!0,this[fa]()},super(e),this[sn]=!1,this.reservations=zy(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[Ni]=0,this[ua]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||on,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=ce(nt.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",r=>this[kf](r))}warn(e,r,n={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(n.recoverable=!1),super.warn(e,r,n)}[fa](){this[ua]&&this[Ni]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[Ff](e){if(this.strip){let r=ce(e.path).split("/");if(r.length<this.strip)return!1;if(e.path=r.slice(this.strip).join("/"),e.type==="Link"){let n=ce(e.linkpath).split("/");if(n.length>=this.strip)e.linkpath=n.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let r=ce(e.path),n=r.split("/");if(n.includes("..")||on&&/^[a-z]:\.\.$/i.test(n[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:r}),!1;let[i,s]=Vy(r);i&&(e.path=s,this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:e,path:r}))}if(nt.isAbsolute(e.path)?e.absolute=ce(nt.resolve(e.path)):e.absolute=ce(nt.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:ce(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:r}=nt.win32.parse(e.absolute);e.absolute=r+_f.encode(e.absolute.slice(r.length));let{root:n}=nt.win32.parse(e.path);e.path=n+_f.encode(e.path.slice(n.length))}return!0}[kf](e){if(!this[Ff](e))return e.resume();switch(jy.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[ha](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[Af](e)}}[V](e,r){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:r}),this[Sr](),r.resume())}[xt](e,r,n){Uf(ce(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r,noChmod:this.noChmod},n)}[tn](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[rn](e){return Bf(this.uid,e.uid,this.processUid)}[nn](e){return Bf(this.gid,e.gid,this.processGid)}[pa](e,r){let n=e.mode&4095||this.fmode,i=new Gy.WriteStream(e.absolute,{flags:jf(e.size),mode:n,autoClose:!1});i.on("error",c=>{i.fd&&b.close(i.fd,()=>{}),i.write=()=>!0,this[V](c,e),r()});let s=1,o=c=>{if(c){i.fd&&b.close(i.fd,()=>{}),this[V](c,e),r();return}--s===0&&b.close(i.fd,l=>{l?this[V](l,e):this[Sr](),r()})};i.on("finish",c=>{let l=e.absolute,u=i.fd;if(e.mtime&&!this.noMtime){s++;let f=e.atime||new Date,d=e.mtime;b.futimes(u,f,d,h=>h?b.utimes(l,f,d,g=>o(g&&h)):o())}if(this[tn](e)){s++;let f=this[rn](e),d=this[nn](e);b.fchown(u,f,d,h=>h?b.chown(l,f,d,g=>o(g&&h)):o())}o()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[V](c,e),r()}),e.pipe(a)),a.pipe(i)}[ma](e,r){let n=e.mode&4095||this.dmode;this[xt](e.absolute,n,i=>{if(i){this[V](i,e),r();return}let s=1,o=a=>{--s===0&&(r(),this[Sr](),e.resume())};e.mtime&&!this.noMtime&&(s++,b.utimes(e.absolute,e.atime||new Date,e.mtime,o)),this[tn](e)&&(s++,b.chown(e.absolute,this[rn](e),this[nn](e),o)),o()})}[Af](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[Nf](e,r){this[Fi](e,e.linkpath,"symlink",r)}[$f](e,r){let n=ce(nt.resolve(this.cwd,e.linkpath));this[Fi](e,n,"link",r)}[qf](){this[Ni]++}[Sr](){this[Ni]--,this[fa]()}[ga](e){this[Sr](),e.resume()}[da](e,r){return e.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&!on}[ha](e){this[qf]();let r=[e.path];e.linkpath&&r.push(e.linkpath),this.reservations.reserve(r,n=>this[Df](e,n))}[Ai](e){e.type==="SymbolicLink"?eS(this.dirCache):e.type!=="Directory"&&Qy(this.dirCache,e.absolute)}[Df](e,r){this[Ai](e);let n=a=>{this[Ai](e),r(a)},i=()=>{this[xt](this.cwd,this.dmode,a=>{if(a){this[V](a,e),n();return}this[sn]=!0,s()})},s=()=>{if(e.absolute!==this.cwd){let a=ce(nt.dirname(e.absolute));if(a!==this.cwd)return this[xt](a,this.dmode,c=>{if(c){this[V](c,e),n();return}o()})}o()},o=()=>{b.lstat(e.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>e.mtime)){this[ga](e),n();return}if(a||this[da](e,c))return this[we](null,e,n);if(c.isDirectory()){if(e.type==="Directory"){let l=!this.noChmod&&e.mode&&(c.mode&4095)!==e.mode,u=f=>this[we](f,e,n);return l?b.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return b.rmdir(e.absolute,l=>this[we](l,e,n))}if(e.absolute===this.cwd)return this[we](null,e,n);Zy(e.absolute,l=>this[we](l,e,n))})};this[sn]?s():i()}[we](e,r,n){if(e){this[V](e,r),n();return}switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[pa](r,n);case"Link":return this[$f](r,n);case"SymbolicLink":return this[Nf](r,n);case"Directory":case"GNUDumpDir":return this[ma](r,n)}}[Fi](e,r,n,i){b[n](r,e.absolute,s=>{s?this[V](s,e):(this[Sr](),e.resume()),i()})}},$i=t=>{try{return[null,t()]}catch(e){return[e,null]}},wa=class extends an{[we](e,r){return super[we](e,r,()=>{})}[ha](e){if(this[Ai](e),!this[sn]){let s=this[xt](this.cwd,this.dmode);if(s)return this[V](s,e);this[sn]=!0}if(e.absolute!==this.cwd){let s=ce(nt.dirname(e.absolute));if(s!==this.cwd){let o=this[xt](s,this.dmode);if(o)return this[V](o,e)}}let[r,n]=$i(()=>b.lstatSync(e.absolute));if(n&&(this.keep||this.newer&&n.mtime>e.mtime))return this[ga](e);if(r||this[da](e,n))return this[we](null,e);if(n.isDirectory()){if(e.type==="Directory"){let o=!this.noChmod&&e.mode&&(n.mode&4095)!==e.mode,[a]=o?$i(()=>{b.chmodSync(e.absolute,e.mode)}):[];return this[we](a,e)}let[s]=$i(()=>b.rmdirSync(e.absolute));this[we](s,e)}let[i]=e.absolute===this.cwd?[]:$i(()=>Ky(e.absolute));this[we](i,e)}[pa](e,r){let n=e.mode&4095||this.fmode,i=a=>{let c;try{b.closeSync(s)}catch(l){c=l}(a||c)&&this[V](a||c,e),r()},s;try{s=b.openSync(e.absolute,jf(e.size),n)}catch(a){return i(a)}let o=this.transform&&this.transform(e)||e;o!==e&&(o.on("error",a=>this[V](a,e)),e.pipe(o)),o.on("data",a=>{try{b.writeSync(s,a,0,a.length)}catch(c){i(c)}}),o.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,u=e.mtime;try{b.futimesSync(s,l,u)}catch(f){try{b.utimesSync(e.absolute,l,u)}catch{c=f}}}if(this[tn](e)){let l=this[rn](e),u=this[nn](e);try{b.fchownSync(s,l,u)}catch(f){try{b.chownSync(e.absolute,l,u)}catch{c=c||f}}}i(c)})}[ma](e,r){let n=e.mode&4095||this.dmode,i=this[xt](e.absolute,n);if(i){this[V](i,e),r();return}if(e.mtime&&!this.noMtime)try{b.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[tn](e))try{b.chownSync(e.absolute,this[rn](e),this[nn](e))}catch{}r(),e.resume()}[xt](e,r){try{return Uf.sync(ce(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r})}catch(n){return n}}[Fi](e,r,n,i){try{b[n+"Sync"](r,e.absolute),i(),e.resume()}catch(s){return this[V](s,e)}}};an.Sync=wa;Wf.exports=an});var Yf=p((GR,Jf)=>{"use strict";var tS=Zt(),qi=Ea(),zf=require("fs"),Vf=mr(),Gf=require("path"),ya=sr();Jf.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=tS(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&rS(n,e),n.file&&n.sync?nS(n):n.file?iS(n,r):n.sync?sS(n):oS(n)};var rS=(t,e)=>{let r=new Map(e.map(s=>[ya(s),!0])),n=t.filter,i=(s,o)=>{let a=o||Gf.parse(s).root||".",c=s===a?!1:r.has(s)?r.get(s):i(Gf.dirname(s),a);return r.set(s,c),c};t.filter=n?(s,o)=>n(s,o)&&i(ya(s)):s=>i(ya(s))},nS=t=>{let e=new qi.Sync(t),r=t.file,n=zf.statSync(r),i=t.maxReadSize||16*1024*1024;new Vf.ReadStreamSync(r,{readSize:i,size:n.size}).pipe(e)},iS=(t,e)=>{let r=new qi(t),n=t.maxReadSize||16*1024*1024,i=t.file,s=new Promise((o,a)=>{r.on("error",a),r.on("close",o),zf.stat(i,(c,l)=>{if(c)a(c);else{let u=new Vf.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(r)}})});return e?s.then(e,e):s},sS=t=>new qi.Sync(t),oS=t=>new qi(t)});var Sa=p(D=>{"use strict";D.c=D.create=Iu();D.r=D.replace=ea();D.t=D.list=Li();D.u=D.update=Bu();D.x=D.extract=Yf();D.Pack=oi();D.Unpack=Ea();D.Parse=Ri();D.ReadEntry=Hn();D.WriteEntry=Po();D.Header=ir();D.Pax=Wn();D.types=so()});var va=p((VR,Xf)=>{Xf.exports=function(e,r,n){e(r),n&&n(r===!0?null:r)}});var Bi=p((JR,Kf)=>{"use strict";var Zf=va();Kf.exports=function(e,r){if(!e)return function(i,s){return i?Zf(s,i,r):s(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(i){return e[i]}));var n=0;return function(i,s){if(i)return Zf(s,i,r);n>=e.length?s(!0):s(null,e[n++])}}});var eh=p((YR,Qf)=>{"use strict";var aS=Bi();Qf.exports=function(t){return aS(Object.keys(t))}});var xa=p((XR,th)=>{"use strict";var cS=va();th.exports=function(e,r){return function(n,i){if(n)return cS(i,n,r);if(e!=null){var s=e;e=null,i(null,s)}else i(!0)}}});var nh=p((ZR,rh)=>{"use strict";rh.exports=function(e){var r=0;return e=e||1/0,function(n,i){if(n)return i&&i(n);if(r>e)return i(!0);i(null,r++)}}});var sh=p((KR,ih)=>{"use strict";ih.exports=function(e){return e=e||Math.random,function(r,n){return r?n&&n(r):n(null,e())}}});var ah=p((QR,oh)=>{"use strict";oh.exports=function(){return function(e,r){r(!0)}}});var lh=p((eL,ch)=>{"use strict";ch.exports=function(e){return function(r,n){n(e)}}});var fh=p((tL,uh)=>{"use strict";uh.exports={keys:eh(),once:xa(),values:Bi(),count:nh(),infinite:sh(),empty:ah(),error:lh()}});var vr=p((rL,hh)=>{"use strict";hh.exports=function(e,r){var n,i,s;r||(s=new Error("no done callback supplied"));function o(a){if(n=a,i)return o.abort();(function c(){for(var l=!0,u=!1;l;)if(u=!1,n(null,function(f,d){if(u=!0,f=f||i){if(l=!1,r)r(f===!0?null:f);else if(f&&f!==!0)throw console.warn(s),f}else e&&e(d)===!1||i?(l=!1,n(i||!0,r||function(){})):l||c()}),!u){l=!1;return}})()}return o.abort=function(a,c){if(typeof a=="function"&&(c=a,a=!0),i=a||!0,n)return n(i,c||function(){})},o}});var ph=p((nL,dh)=>{"use strict";var lS=vr();dh.exports=function(e){return lS(null,e)}});var gh=p((iL,mh)=>{"use strict";var uS=vr();mh.exports=function(e){return uS(function(r){console.log(r)},e)}});var xr=p((sL,wh)=>{wh.exports=function(e){return e&&(typeof e=="string"?function(r){return r[e]}:typeof e=="object"&&typeof e.exec=="function"?function(r){var n=e.exec(r);return n&&n[0]}:e)}});var Sh=p((oL,yh)=>{"use strict";function Eh(t){return t}var fS=xr(),hS=vr();yh.exports=function(e,r){var n=!1;return r?e=fS(e)||Eh:(r=e,e=Eh),hS(function(i){if(e(i))return n=!0,r(null,i),!1},function(i){n||r(i===!0?null:i,null)})}});var Mi=p((aL,vh)=>{"use strict";var dS=vr();vh.exports=function(e,r,n){n||(n=r,r=null);var i=dS(function(s){r=e(r,s)},function(s){n(s,r)});return arguments.length===2?function(s){s(null,function(o,a){if(o)return n(o===!0?null:o);r=a,i(s)})}:i}});var ba=p((cL,xh)=>{"use strict";var pS=Mi();xh.exports=function(e){return pS(function(r,n){return r.push(n),r},[],e)}});var Ph=p((lL,bh)=>{"use strict";var mS=ba();bh.exports=function(){return e=>{let r,n,i=new Promise((s,o)=>{r=s,n=o});return mS((s,o)=>{s?n(s):r(o)})(e),i}}});var Lh=p((uL,Rh)=>{"use strict";var gS=Mi();Rh.exports=function(e){return gS(function(r,n){return r+n},"",e)}});var Ch=p((fL,Th)=>{"use strict";Th.exports={drain:vr(),onEnd:ph(),log:gh(),find:Sh(),reduce:Mi(),collect:ba(),collectAsPromise:Ph(),concat:Lh()}});var Ih=p((hL,Oh)=>{"use strict";function wS(t){return t}var ES=xr();Oh.exports=function(e){return e?(e=ES(e),function(r){return function(n,i){r(n,function(s,o){try{o=s?null:e(o)}catch(a){return r(a,function(){return i(a)})}i(s,o)})}}):wS}});var kh=p((dL,_h)=>{"use strict";function yS(t){return t}var SS=xr();_h.exports=function(e){if(!e)return yS;e=SS(e);var r=!1,n,i;return function(s){return function o(a,c){if(i)return c(i);a?(i=a,r?s(a,function(l){r?n=c:c(a)}):s(a,function(l){c(a)})):s(null,function(l,u){l?c(l):i?c(i):(r=!0,e(u,function(f,d){r=!1,i?(c(i),n&&n(i)):f?o(f,c):c(null,d)}))})}}}});var Pa=p((pL,Dh)=>{var vS=xr();function xS(t){return t}Dh.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(r){return e.test(r)}:vS(e)||xS}});var Ui=p((mL,Nh)=>{"use strict";var bS=Pa();Nh.exports=function(e){return e=bS(e),function(r){return function n(i,s){for(var o,a=!0;a;)a=!1,o=!0,r(i,function(c,l){if(!c&&!e(l))return o?a=!0:n(c,s);s(c,l)}),o=!1}}}});var Ah=p((gL,$h)=>{"use strict";var PS=Pa(),RS=Ui();$h.exports=function(e){return e=PS(e),RS(function(r){return!e(r)})}});var qh=p((wL,Fh)=>{"use strict";Fh.exports=function(e,r){var n=!1;function i(s){n||!r||(n=!0,r(s===!0?null:s))}return function(s){return function(o,a){return o&&i(o),s(o,function(c,l){c?i(c):e&&e(l),a(c,l)})}}}});var Mh=p((EL,Bh)=>{"use strict";Bh.exports=function(e,r){r=r||{};var n=r.last||!1,i=!1;if(typeof e=="number"){n=!0;var s=e;e=function(){return--s}}return function(o){function a(c){o(!0,function(l){n=!1,c(l||!0)})}return function(c,l){i&&!c?n?a(l):l(i):(i=c)?o(i,l):o(null,function(u,f){(i=i||u)?l(i):e(f)?l(null,f):(i=!0,n?l(null,f):a(l))})}}}});var Ra=p((yL,Uh)=>{"use strict";function LS(t){return t}var TS=xr(),CS=Ui();Uh.exports=function(e,r){e=TS(e)||LS;var n={};return CS(function(i){var s=e(i);return n[s]?!!r:(n[s]=!0,!r)})}});var jh=p((SL,Hh)=>{"use strict";var OS=Ra();Hh.exports=function(e){return OS(e,!0)}});var Gh=p((vL,Wh)=>{"use strict";var IS=Bi(),_S=xa();Wh.exports=function(){return function(e){var r;return function(n,i){n?r?r(n,function(a){e(a||n,i)}):e(n,i):r?s():o();function s(){r(null,function(a,c){a?a===!0?o():e(!0,function(l){i(a)}):i(null,c)})}function o(){r=null,e(null,function(a,c){if(a)return i(a);c&&typeof c=="object"?c=IS(c):typeof c!="function"&&(c=_S(c)),r=c,s()})}}}}});var Vh=p((xL,zh)=>{"use strict";zh.exports={map:Ih(),asyncMap:kh(),filter:Ui(),filterNot:Ah(),through:qh(),take:Mh(),unique:Ra(),nonUnique:jh(),flatten:Gh()}});var La=p((bL,Jh)=>{"use strict";Jh.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var s=e;s&&typeof s.source=="function"&&(s=s.source);for(var i=1;i<r;i++){var o=arguments[i];typeof o=="function"?s=o(s):o&&typeof o=="object"&&(o.sink(s),s=o.source)}return s}});var cn=p((Bt,Kh)=>{"use strict";var Yh=fh(),Xh=Ch(),Zh=Vh();Bt=Kh.exports=La();Bt.pull=Bt;for(Re in Yh)Bt[Re]=Yh[Re];var Re;for(Re in Zh)Bt[Re]=Zh[Re];var Re;for(Re in Xh)Bt[Re]=Xh[Re];var Re});var td=p((OL,ed)=>{var br=1e3,Pr=br*60,Rr=Pr*60,Ut=Rr*24,NS=Ut*7,$S=Ut*365.25;ed.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return AS(t);if(r==="number"&&isFinite(t))return e.long?qS(t):FS(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function AS(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*$S;case"weeks":case"week":case"w":return r*NS;case"days":case"day":case"d":return r*Ut;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Rr;case"minutes":case"minute":case"mins":case"min":case"m":return r*Pr;case"seconds":case"second":case"secs":case"sec":case"s":return r*br;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function FS(t){var e=Math.abs(t);return e>=Ut?Math.round(t/Ut)+"d":e>=Rr?Math.round(t/Rr)+"h":e>=Pr?Math.round(t/Pr)+"m":e>=br?Math.round(t/br)+"s":t+"ms"}function qS(t){var e=Math.abs(t);return e>=Ut?Hi(t,e,Ut,"day"):e>=Rr?Hi(t,e,Rr,"hour"):e>=Pr?Hi(t,e,Pr,"minute"):e>=br?Hi(t,e,br,"second"):t+" ms"}function Hi(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var Oa=p((IL,rd)=>{function BS(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=td(),r.destroy=l,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let f=0;for(let d=0;d<u.length;d++)f=(f<<5)-f+u.charCodeAt(d),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(u){let f,d=null,h,g;function S(...w){if(!S.enabled)return;let m=S,P=Number(new Date),k=P-(f||P);m.diff=k,m.prev=f,m.curr=P,f=P,w[0]=r.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let H=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(K,_e)=>{if(K==="%%")return"%";H++;let Me=r.formatters[_e];if(typeof Me=="function"){let Nr=w[H];K=Me.call(m,Nr),w.splice(H,1),H--}return K}),r.formatArgs.call(m,w),(m.log||r.log).apply(m,w)}return S.namespace=u,S.useColors=r.useColors(),S.color=r.selectColor(u),S.extend=n,S.destroy=r.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(h!==r.namespaces&&(h=r.namespaces,g=r.enabled(u)),g),set:w=>{d=w}}),typeof r.init=="function"&&r.init(S),S}function n(u,f){let d=r(this.namespace+(typeof f>"u"?":":f)+u);return d.log=this.log,d}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let f,d=(typeof u=="string"?u:"").split(/[\s,]+/),h=d.length;for(f=0;f<h;f++)d[f]&&(u=d[f].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.slice(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function s(){let u=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let f,d;for(f=0,d=r.skips.length;f<d;f++)if(r.skips[f].test(u))return!1;for(f=0,d=r.names.length;f<d;f++)if(r.names[f].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}rd.exports=BS});var nd=p((le,ji)=>{le.formatArgs=US;le.save=HS;le.load=jS;le.useColors=MS;le.storage=WS();le.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();le.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function MS(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function US(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+ji.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}le.log=console.debug||console.log||(()=>{});function HS(t){try{t?le.storage.setItem("debug",t):le.storage.removeItem("debug")}catch{}}function jS(){let t;try{t=le.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function WS(){try{return localStorage}catch{}}ji.exports=Oa()(le);var{formatters:GS}=ji.exports;GS.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var sd=p((_L,id)=>{"use strict";id.exports=(t,e)=>{e=e||process.argv;let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1?!0:n<i)}});var ad=p((kL,od)=>{"use strict";var zS=require("os"),Te=sd(),J=process.env,Lr;Te("no-color")||Te("no-colors")||Te("color=false")?Lr=!1:(Te("color")||Te("colors")||Te("color=true")||Te("color=always"))&&(Lr=!0);"FORCE_COLOR"in J&&(Lr=J.FORCE_COLOR.length===0||parseInt(J.FORCE_COLOR,10)!==0);function VS(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function JS(t){if(Lr===!1)return 0;if(Te("color=16m")||Te("color=full")||Te("color=truecolor"))return 3;if(Te("color=256"))return 2;if(t&&!t.isTTY&&Lr!==!0)return 0;let e=Lr?1:0;if(process.platform==="win32"){let r=zS.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in J)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(r=>r in J)||J.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in J)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(J.TEAMCITY_VERSION)?1:0;if(J.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in J){let r=parseInt((J.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(J.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(J.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(J.TERM)||"COLORTERM"in J?1:(J.TERM==="dumb",e)}function Ia(t){let e=JS(t);return VS(e)}od.exports={supportsColor:Ia,stdout:Ia(process.stdout),stderr:Ia(process.stderr)}});var ld=p((U,Gi)=>{var YS=require("tty"),Wi=require("util");U.init=rv;U.log=QS;U.formatArgs=ZS;U.save=ev;U.load=tv;U.useColors=XS;U.destroy=Wi.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");U.colors=[6,2,3,4,5,1];try{let t=ad();t&&(t.stderr||t).level>=2&&(U.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}U.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function XS(){return"colors"in U.inspectOpts?!!U.inspectOpts.colors:YS.isatty(process.stderr.fd)}function ZS(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+Gi.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=KS()+e+" "+t[0]}function KS(){return U.inspectOpts.hideDate?"":new Date().toISOString()+" "}function QS(...t){return process.stderr.write(Wi.format(...t)+`
`)}function ev(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function tv(){return process.env.DEBUG}function rv(t){t.inspectOpts={};let e=Object.keys(U.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=U.inspectOpts[e[r]]}Gi.exports=Oa()(U);var{formatters:cd}=Gi.exports;cd.o=function(t){return this.inspectOpts.colors=this.useColors,Wi.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};cd.O=function(t){return this.inspectOpts.colors=this.useColors,Wi.inspect(t,this.inspectOpts)}});var zi=p((DL,_a)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?_a.exports=nd():_a.exports=ld()});var fd=p((NL,ud)=>{var ln;ud.exports=function(){if(!ln){try{ln=zi()("follow-redirects")}catch{}typeof ln!="function"&&(ln=function(){})}ln.apply(null,arguments)}});var yd=p(($L,Aa)=>{var Ht=require("url"),ka=Ht.URL,nv=require("http"),iv=require("https"),pd=require("stream").Writable,md=require("assert"),gd=fd(),Na=["abort","aborted","connect","error","socket","timeout"],$a=Object.create(null);Na.forEach(function(t){$a[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var sv=fn("ERR_INVALID_URL","Invalid URL",TypeError),hd=fn("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),ov=fn("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),av=fn("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),cv=fn("ERR_STREAM_WRITE_AFTER_END","write after end");function ue(t,e){pd.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}ue.prototype=Object.create(pd.prototype);ue.prototype.abort=function(){Ed(this._currentRequest),this.emit("abort")};ue.prototype.write=function(t,e,r){if(this._ending)throw new cv;if(!jt(t)&&!fv(t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(un(e)&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new av),this.abort())};ue.prototype.end=function(t,e,r){if(un(t)?(r=t,t=e=null):un(e)&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(t,e,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};ue.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};ue.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};ue.prototype.setTimeout=function(t,e){var r=this;function n(o){o.setTimeout(t),o.removeListener("timeout",o.destroy),o.addListener("timeout",o.destroy)}function i(o){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),s()},t),n(o)}function s(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",s),r.removeListener("error",s),r.removeListener("response",s),e&&r.removeListener("timeout",e),r.socket||r._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",s),this.on("error",s),this.on("response",s),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){ue.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(ue.prototype,t,{get:function(){return this._currentRequest[t]}})});ue.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};ue.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.slice(0,-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);n._redirectable=this;for(var i of Na)n.on(i,$a[i]);if(this._currentUrl=/^\//.test(this._options.path)?Ht.format(this._options):this._options.path,this._isRedirect){var s=0,o=this,a=this._requestBodyBuffers;(function c(l){if(n===o._currentRequest)if(l)o.emit("error",l);else if(s<a.length){var u=a[s++];n.finished||n.write(u.data,u.encoding,c)}else o._ended&&n.end()})()}};ue.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(!r||this._options.followRedirects===!1||e<300||e>=400){t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[];return}if(Ed(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new ov);return}var n,i=this._options.beforeRedirect;i&&(n=Object.assign({Host:t.req.getHeader("host")},this._options.headers));var s=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Da(/^content-/i,this._options.headers));var o=Da(/^host$/i,this._options.headers),a=Ht.parse(this._currentUrl),c=o||a.host,l=/^\w+:/.test(r)?this._currentUrl:Ht.format(Object.assign(a,{host:c})),u;try{u=Ht.resolve(l,r)}catch(g){this.emit("error",new hd({cause:g}));return}gd("redirecting to",u),this._isRedirect=!0;var f=Ht.parse(u);if(Object.assign(this._options,f),(f.protocol!==a.protocol&&f.protocol!=="https:"||f.host!==c&&!uv(f.host,c))&&Da(/^(?:authorization|cookie)$/i,this._options.headers),un(i)){var d={headers:t.headers,statusCode:e},h={url:l,method:s,headers:n};try{i(this._options,d,h)}catch(g){this.emit("error",g);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(g){this.emit("error",new hd({cause:g}))}};function wd(t){var e={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(t).forEach(function(n){var i=n+":",s=r[i]=t[n],o=e[n]=Object.create(s);function a(l,u,f){if(jt(l)){var d;try{d=dd(new ka(l))}catch{d=Ht.parse(l)}if(!jt(d.protocol))throw new sv({input:l});l=d}else ka&&l instanceof ka?l=dd(l):(f=u,u=l,l={protocol:i});return un(u)&&(f=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=r,!jt(u.host)&&!jt(u.hostname)&&(u.hostname="::1"),md.equal(u.protocol,i,"protocol mismatch"),gd("options",u),new ue(u,f)}function c(l,u,f){var d=o.request(l,u,f);return d.end(),d}Object.defineProperties(o,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function lv(){}function dd(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function Da(t,e){var r;for(var n in e)t.test(n)&&(r=e[n],delete e[n]);return r===null||typeof r>"u"?void 0:String(r).trim()}function fn(t,e,r){function n(i){Error.captureStackTrace(this,this.constructor),Object.assign(this,i||{}),this.code=t,this.message=this.cause?e+": "+this.cause.message:e}return n.prototype=new(r||Error),n.prototype.constructor=n,n.prototype.name="Error ["+t+"]",n}function Ed(t){for(var e of Na)t.removeListener(e,$a[e]);t.on("error",lv),t.abort()}function uv(t,e){md(jt(t)&&jt(e));var r=t.length-e.length-1;return r>0&&t[r]==="."&&t.endsWith(e)}function jt(t){return typeof t=="string"||t instanceof String}function un(t){return typeof t=="function"}function fv(t){return typeof t=="object"&&"length"in t}Aa.exports=wd({http:nv,https:iv});Aa.exports.wrap=wd});var hn=p((AL,Sd)=>{var hv="2.0.0",dv=Number.MAX_SAFE_INTEGER||9007199254740991,pv=16,mv=["major","premajor","minor","preminor","patch","prepatch","prerelease"];Sd.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:pv,MAX_SAFE_INTEGER:dv,RELEASE_TYPES:mv,SEMVER_SPEC_VERSION:hv,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var dn=p((FL,vd)=>{var gv=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};vd.exports=gv});var Tr=p((it,xd)=>{var{MAX_SAFE_COMPONENT_LENGTH:Fa}=hn(),wv=dn();it=xd.exports={};var Ev=it.re=[],yv=it.safeRe=[],E=it.src=[],y=it.t={},Sv=0,v=(t,e,r)=>{let n=e.split("\\s*").join("\\s{0,1}").split("\\s+").join("\\s"),i=Sv++;wv(t,i,e),y[t]=i,E[i]=e,Ev[i]=new RegExp(e,r?"g":void 0),yv[i]=new RegExp(n,r?"g":void 0)};v("NUMERICIDENTIFIER","0|[1-9]\\d*");v("NUMERICIDENTIFIERLOOSE","[0-9]+");v("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");v("MAINVERSION",`(${E[y.NUMERICIDENTIFIER]})\\.(${E[y.NUMERICIDENTIFIER]})\\.(${E[y.NUMERICIDENTIFIER]})`);v("MAINVERSIONLOOSE",`(${E[y.NUMERICIDENTIFIERLOOSE]})\\.(${E[y.NUMERICIDENTIFIERLOOSE]})\\.(${E[y.NUMERICIDENTIFIERLOOSE]})`);v("PRERELEASEIDENTIFIER",`(?:${E[y.NUMERICIDENTIFIER]}|${E[y.NONNUMERICIDENTIFIER]})`);v("PRERELEASEIDENTIFIERLOOSE",`(?:${E[y.NUMERICIDENTIFIERLOOSE]}|${E[y.NONNUMERICIDENTIFIER]})`);v("PRERELEASE",`(?:-(${E[y.PRERELEASEIDENTIFIER]}(?:\\.${E[y.PRERELEASEIDENTIFIER]})*))`);v("PRERELEASELOOSE",`(?:-?(${E[y.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${E[y.PRERELEASEIDENTIFIERLOOSE]})*))`);v("BUILDIDENTIFIER","[0-9A-Za-z-]+");v("BUILD",`(?:\\+(${E[y.BUILDIDENTIFIER]}(?:\\.${E[y.BUILDIDENTIFIER]})*))`);v("FULLPLAIN",`v?${E[y.MAINVERSION]}${E[y.PRERELEASE]}?${E[y.BUILD]}?`);v("FULL",`^${E[y.FULLPLAIN]}$`);v("LOOSEPLAIN",`[v=\\s]*${E[y.MAINVERSIONLOOSE]}${E[y.PRERELEASELOOSE]}?${E[y.BUILD]}?`);v("LOOSE",`^${E[y.LOOSEPLAIN]}$`);v("GTLT","((?:<|>)?=?)");v("XRANGEIDENTIFIERLOOSE",`${E[y.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);v("XRANGEIDENTIFIER",`${E[y.NUMERICIDENTIFIER]}|x|X|\\*`);v("XRANGEPLAIN",`[v=\\s]*(${E[y.XRANGEIDENTIFIER]})(?:\\.(${E[y.XRANGEIDENTIFIER]})(?:\\.(${E[y.XRANGEIDENTIFIER]})(?:${E[y.PRERELEASE]})?${E[y.BUILD]}?)?)?`);v("XRANGEPLAINLOOSE",`[v=\\s]*(${E[y.XRANGEIDENTIFIERLOOSE]})(?:\\.(${E[y.XRANGEIDENTIFIERLOOSE]})(?:\\.(${E[y.XRANGEIDENTIFIERLOOSE]})(?:${E[y.PRERELEASELOOSE]})?${E[y.BUILD]}?)?)?`);v("XRANGE",`^${E[y.GTLT]}\\s*${E[y.XRANGEPLAIN]}$`);v("XRANGELOOSE",`^${E[y.GTLT]}\\s*${E[y.XRANGEPLAINLOOSE]}$`);v("COERCE",`(^|[^\\d])(\\d{1,${Fa}})(?:\\.(\\d{1,${Fa}}))?(?:\\.(\\d{1,${Fa}}))?(?:$|[^\\d])`);v("COERCERTL",E[y.COERCE],!0);v("LONETILDE","(?:~>?)");v("TILDETRIM",`(\\s*)${E[y.LONETILDE]}\\s+`,!0);it.tildeTrimReplace="$1~";v("TILDE",`^${E[y.LONETILDE]}${E[y.XRANGEPLAIN]}$`);v("TILDELOOSE",`^${E[y.LONETILDE]}${E[y.XRANGEPLAINLOOSE]}$`);v("LONECARET","(?:\\^)");v("CARETTRIM",`(\\s*)${E[y.LONECARET]}\\s+`,!0);it.caretTrimReplace="$1^";v("CARET",`^${E[y.LONECARET]}${E[y.XRANGEPLAIN]}$`);v("CARETLOOSE",`^${E[y.LONECARET]}${E[y.XRANGEPLAINLOOSE]}$`);v("COMPARATORLOOSE",`^${E[y.GTLT]}\\s*(${E[y.LOOSEPLAIN]})$|^$`);v("COMPARATOR",`^${E[y.GTLT]}\\s*(${E[y.FULLPLAIN]})$|^$`);v("COMPARATORTRIM",`(\\s*)${E[y.GTLT]}\\s*(${E[y.LOOSEPLAIN]}|${E[y.XRANGEPLAIN]})`,!0);it.comparatorTrimReplace="$1$2$3";v("HYPHENRANGE",`^\\s*(${E[y.XRANGEPLAIN]})\\s+-\\s+(${E[y.XRANGEPLAIN]})\\s*$`);v("HYPHENRANGELOOSE",`^\\s*(${E[y.XRANGEPLAINLOOSE]})\\s+-\\s+(${E[y.XRANGEPLAINLOOSE]})\\s*$`);v("STAR","(<|>)?=?\\s*\\*");v("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");v("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Vi=p((qL,bd)=>{var vv=Object.freeze({loose:!0}),xv=Object.freeze({}),bv=t=>t?typeof t!="object"?vv:t:xv;bd.exports=bv});var qa=p((BL,Ld)=>{var Pd=/^[0-9]+$/,Rd=(t,e)=>{let r=Pd.test(t),n=Pd.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},Pv=(t,e)=>Rd(e,t);Ld.exports={compareIdentifiers:Rd,rcompareIdentifiers:Pv}});var Y=p((ML,Id)=>{var Ji=dn(),{MAX_LENGTH:Td,MAX_SAFE_INTEGER:Yi}=hn(),{safeRe:Cd,t:Od}=Tr(),Rv=Vi(),{compareIdentifiers:Cr}=qa(),fe=class{constructor(e,r){if(r=Rv(r),e instanceof fe){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Td)throw new TypeError(`version is longer than ${Td} characters`);Ji("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?Cd[Od.LOOSE]:Cd[Od.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Yi||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Yi||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Yi||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<Yi)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Ji("SemVer.compare",this.version,this.options,e),!(e instanceof fe)){if(typeof e=="string"&&e===this.version)return 0;e=new fe(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof fe||(e=new fe(e,this.options)),Cr(this.major,e.major)||Cr(this.minor,e.minor)||Cr(this.patch,e.patch)}comparePre(e){if(e instanceof fe||(e=new fe(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(Ji("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Cr(n,i)}while(++r)}compareBuild(e){e instanceof fe||(e=new fe(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(Ji("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Cr(n,i)}while(++r)}inc(e,r,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),Cr(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Id.exports=fe});var Wt=p((UL,kd)=>{var _d=Y(),Lv=(t,e,r=!1)=>{if(t instanceof _d)return t;try{return new _d(t,e)}catch(n){if(!r)return null;throw n}};kd.exports=Lv});var Nd=p((HL,Dd)=>{var Tv=Wt(),Cv=(t,e)=>{let r=Tv(t,e);return r?r.version:null};Dd.exports=Cv});var Ad=p((jL,$d)=>{var Ov=Wt(),Iv=(t,e)=>{let r=Ov(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};$d.exports=Iv});var Bd=p((WL,qd)=>{var Fd=Y(),_v=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new Fd(t instanceof Fd?t.version:t,r).inc(e,n,i).version}catch{return null}};qd.exports=_v});var Hd=p((GL,Ud)=>{var Md=Wt(),kv=(t,e)=>{let r=Md(t,null,!0),n=Md(e,null,!0),i=r.compare(n);if(i===0)return null;let s=i>0,o=s?r:n,a=s?n:r,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";let u=c?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":"prerelease"};Ud.exports=kv});var Wd=p((zL,jd)=>{var Dv=Y(),Nv=(t,e)=>new Dv(t,e).major;jd.exports=Nv});var zd=p((VL,Gd)=>{var $v=Y(),Av=(t,e)=>new $v(t,e).minor;Gd.exports=Av});var Jd=p((JL,Vd)=>{var Fv=Y(),qv=(t,e)=>new Fv(t,e).patch;Vd.exports=qv});var Xd=p((YL,Yd)=>{var Bv=Wt(),Mv=(t,e)=>{let r=Bv(t,e);return r&&r.prerelease.length?r.prerelease:null};Yd.exports=Mv});var Ee=p((XL,Kd)=>{var Zd=Y(),Uv=(t,e,r)=>new Zd(t,r).compare(new Zd(e,r));Kd.exports=Uv});var ep=p((ZL,Qd)=>{var Hv=Ee(),jv=(t,e,r)=>Hv(e,t,r);Qd.exports=jv});var rp=p((KL,tp)=>{var Wv=Ee(),Gv=(t,e)=>Wv(t,e,!0);tp.exports=Gv});var Xi=p((QL,ip)=>{var np=Y(),zv=(t,e,r)=>{let n=new np(t,r),i=new np(e,r);return n.compare(i)||n.compareBuild(i)};ip.exports=zv});var op=p((eT,sp)=>{var Vv=Xi(),Jv=(t,e)=>t.sort((r,n)=>Vv(r,n,e));sp.exports=Jv});var cp=p((tT,ap)=>{var Yv=Xi(),Xv=(t,e)=>t.sort((r,n)=>Yv(n,r,e));ap.exports=Xv});var pn=p((rT,lp)=>{var Zv=Ee(),Kv=(t,e,r)=>Zv(t,e,r)>0;lp.exports=Kv});var Zi=p((nT,up)=>{var Qv=Ee(),ex=(t,e,r)=>Qv(t,e,r)<0;up.exports=ex});var Ba=p((iT,fp)=>{var tx=Ee(),rx=(t,e,r)=>tx(t,e,r)===0;fp.exports=rx});var Ma=p((sT,hp)=>{var nx=Ee(),ix=(t,e,r)=>nx(t,e,r)!==0;hp.exports=ix});var Ki=p((oT,dp)=>{var sx=Ee(),ox=(t,e,r)=>sx(t,e,r)>=0;dp.exports=ox});var Qi=p((aT,pp)=>{var ax=Ee(),cx=(t,e,r)=>ax(t,e,r)<=0;pp.exports=cx});var Ua=p((cT,mp)=>{var lx=Ba(),ux=Ma(),fx=pn(),hx=Ki(),dx=Zi(),px=Qi(),mx=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return lx(t,r,n);case"!=":return ux(t,r,n);case">":return fx(t,r,n);case">=":return hx(t,r,n);case"<":return dx(t,r,n);case"<=":return px(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};mp.exports=mx});var wp=p((lT,gp)=>{var gx=Y(),wx=Wt(),{safeRe:es,t:ts}=Tr(),Ex=(t,e)=>{if(t instanceof gx)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(es[ts.COERCE]);else{let n;for(;(n=es[ts.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),es[ts.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;es[ts.COERCERTL].lastIndex=-1}return r===null?null:wx(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};gp.exports=Ex});var xp=p((uT,vp)=>{"use strict";var yx=Zn(),Gt=Symbol("max"),ot=Symbol("length"),Or=Symbol("lengthCalculator"),gn=Symbol("allowStale"),zt=Symbol("maxAge"),st=Symbol("dispose"),Ep=Symbol("noDisposeOnSet"),q=Symbol("lruList"),Ce=Symbol("cache"),Sp=Symbol("updateAgeOnGet"),Ha=()=>1,Wa=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[Gt]=e.max||1/0,n=e.length||Ha;if(this[Or]=typeof n!="function"?Ha:n,this[gn]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[zt]=e.maxAge||0,this[st]=e.dispose,this[Ep]=e.noDisposeOnSet||!1,this[Sp]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Gt]=e||1/0,mn(this)}get max(){return this[Gt]}set allowStale(e){this[gn]=!!e}get allowStale(){return this[gn]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[zt]=e,mn(this)}get maxAge(){return this[zt]}set lengthCalculator(e){typeof e!="function"&&(e=Ha),e!==this[Or]&&(this[Or]=e,this[ot]=0,this[q].forEach(r=>{r.length=this[Or](r.value,r.key),this[ot]+=r.length})),mn(this)}get lengthCalculator(){return this[Or]}get length(){return this[ot]}get itemCount(){return this[q].length}rforEach(e,r){r=r||this;for(let n=this[q].tail;n!==null;){let i=n.prev;yp(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[q].head;n!==null;){let i=n.next;yp(this,e,n,r),n=i}}keys(){return this[q].toArray().map(e=>e.key)}values(){return this[q].toArray().map(e=>e.value)}reset(){this[st]&&this[q]&&this[q].length&&this[q].forEach(e=>this[st](e.key,e.value)),this[Ce]=new Map,this[q]=new yx,this[ot]=0}dump(){return this[q].map(e=>rs(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[q]}set(e,r,n){if(n=n||this[zt],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,s=this[Or](r,e);if(this[Ce].has(e)){if(s>this[Gt])return Ir(this,this[Ce].get(e)),!1;let c=this[Ce].get(e).value;return this[st]&&(this[Ep]||this[st](e,c.value)),c.now=i,c.maxAge=n,c.value=r,this[ot]+=s-c.length,c.length=s,this.get(e),mn(this),!0}let o=new Ga(e,r,s,i,n);return o.length>this[Gt]?(this[st]&&this[st](e,r),!1):(this[ot]+=o.length,this[q].unshift(o),this[Ce].set(e,this[q].head),mn(this),!0)}has(e){if(!this[Ce].has(e))return!1;let r=this[Ce].get(e).value;return!rs(this,r)}get(e){return ja(this,e,!0)}peek(e){return ja(this,e,!1)}pop(){let e=this[q].tail;return e?(Ir(this,e),e.value):null}del(e){Ir(this,this[Ce].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let o=s-r;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Ce].forEach((e,r)=>ja(this,r,!1))}},ja=(t,e,r)=>{let n=t[Ce].get(e);if(n){let i=n.value;if(rs(t,i)){if(Ir(t,n),!t[gn])return}else r&&(t[Sp]&&(n.value.now=Date.now()),t[q].unshiftNode(n));return i.value}},rs=(t,e)=>{if(!e||!e.maxAge&&!t[zt])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[zt]&&r>t[zt]},mn=t=>{if(t[ot]>t[Gt])for(let e=t[q].tail;t[ot]>t[Gt]&&e!==null;){let r=e.prev;Ir(t,e),e=r}},Ir=(t,e)=>{if(e){let r=e.value;t[st]&&t[st](r.key,r.value),t[ot]-=r.length,t[Ce].delete(r.key),t[q].removeNode(e)}},Ga=class{constructor(e,r,n,i,s){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=s||0}},yp=(t,e,r,n)=>{let i=r.value;rs(t,i)&&(Ir(t,r),t[gn]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};vp.exports=Wa});var ye=p((fT,Lp)=>{var Vt=class{constructor(e,r){if(r=vx(r),e instanceof Vt)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new Vt(e.raw,r);if(e instanceof za)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(n=>this.parseRange(n)).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!Pp(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&Cx(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&Lx)|(this.options.loose&&Tx))+":"+e,i=bp.get(n);if(i)return i;let s=this.options.loose,o=s?ie[X.HYPHENRANGELOOSE]:ie[X.HYPHENRANGE];e=e.replace(o,qx(this.options.includePrerelease)),C("hyphen replace",e),e=e.replace(ie[X.COMPARATORTRIM],bx),C("comparator trim",e),e=e.replace(ie[X.TILDETRIM],Px),e=e.replace(ie[X.CARETTRIM],Rx);let a=e.split(" ").map(f=>Ox(f,this.options)).join(" ").split(/\s+/).map(f=>Fx(f,this.options));s&&(a=a.filter(f=>(C("loose invalid filter",f,this.options),!!f.match(ie[X.COMPARATORLOOSE])))),C("range list",a);let c=new Map,l=a.map(f=>new za(f,this.options));for(let f of l){if(Pp(f))return[f];c.set(f.value,f)}c.size>1&&c.has("")&&c.delete("");let u=[...c.values()];return bp.set(n,u),u}intersects(e,r){if(!(e instanceof Vt))throw new TypeError("a Range is required");return this.set.some(n=>Rp(n,r)&&e.set.some(i=>Rp(i,r)&&n.every(s=>i.every(o=>s.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new xx(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(Bx(this.set[r],e,this.options))return!0;return!1}};Lp.exports=Vt;var Sx=xp(),bp=new Sx({max:1e3}),vx=Vi(),za=wn(),C=dn(),xx=Y(),{safeRe:ie,t:X,comparatorTrimReplace:bx,tildeTrimReplace:Px,caretTrimReplace:Rx}=Tr(),{FLAG_INCLUDE_PRERELEASE:Lx,FLAG_LOOSE:Tx}=hn(),Pp=t=>t.value==="<0.0.0-0",Cx=t=>t.value==="",Rp=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(s=>i.intersects(s,e)),i=n.pop();return r},Ox=(t,e)=>(C("comp",t,e),t=kx(t,e),C("caret",t),t=Ix(t,e),C("tildes",t),t=Nx(t,e),C("xrange",t),t=Ax(t,e),C("stars",t),t),Z=t=>!t||t.toLowerCase()==="x"||t==="*",Ix=(t,e)=>t.trim().split(/\s+/).map(r=>_x(r,e)).join(" "),_x=(t,e)=>{let r=e.loose?ie[X.TILDELOOSE]:ie[X.TILDE];return t.replace(r,(n,i,s,o,a)=>{C("tilde",t,n,i,s,o,a);let c;return Z(i)?c="":Z(s)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Z(o)?c=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(C("replaceTilde pr",a),c=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):c=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,C("tilde return",c),c})},kx=(t,e)=>t.trim().split(/\s+/).map(r=>Dx(r,e)).join(" "),Dx=(t,e)=>{C("caret",t,e);let r=e.loose?ie[X.CARETLOOSE]:ie[X.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,s,o,a,c)=>{C("caret",t,i,s,o,a,c);let l;return Z(s)?l="":Z(o)?l=`>=${s}.0.0${n} <${+s+1}.0.0-0`:Z(a)?s==="0"?l=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:c?(C("replaceCaret pr",c),s==="0"?o==="0"?l=`>=${s}.${o}.${a}-${c} <${s}.${o}.${+a+1}-0`:l=`>=${s}.${o}.${a}-${c} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.${a}-${c} <${+s+1}.0.0-0`):(C("no pr"),s==="0"?o==="0"?l=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:l=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),C("caret return",l),l})},Nx=(t,e)=>(C("replaceXRanges",t,e),t.split(/\s+/).map(r=>$x(r,e)).join(" ")),$x=(t,e)=>{t=t.trim();let r=e.loose?ie[X.XRANGELOOSE]:ie[X.XRANGE];return t.replace(r,(n,i,s,o,a,c)=>{C("xRange",t,n,i,s,o,a,c);let l=Z(s),u=l||Z(o),f=u||Z(a),d=f;return i==="="&&d&&(i=""),c=e.includePrerelease?"-0":"",l?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&d?(u&&(o=0),a=0,i===">"?(i=">=",u?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",u?s=+s+1:o=+o+1),i==="<"&&(c="-0"),n=`${i+s}.${o}.${a}${c}`):u?n=`>=${s}.0.0${c} <${+s+1}.0.0-0`:f&&(n=`>=${s}.${o}.0${c} <${s}.${+o+1}.0-0`),C("xRange return",n),n})},Ax=(t,e)=>(C("replaceStars",t,e),t.trim().replace(ie[X.STAR],"")),Fx=(t,e)=>(C("replaceGTE0",t,e),t.trim().replace(ie[e.includePrerelease?X.GTE0PRE:X.GTE0],"")),qx=t=>(e,r,n,i,s,o,a,c,l,u,f,d,h)=>(Z(n)?r="":Z(i)?r=`>=${n}.0.0${t?"-0":""}`:Z(s)?r=`>=${n}.${i}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,Z(l)?c="":Z(u)?c=`<${+l+1}.0.0-0`:Z(f)?c=`<${l}.${+u+1}.0-0`:d?c=`<=${l}.${u}.${f}-${d}`:t?c=`<${l}.${u}.${+f+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),Bx=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(C(t[n].semver),t[n].semver!==za.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var wn=p((hT,kp)=>{var En=Symbol("SemVer ANY"),_r=class{static get ANY(){return En}constructor(e,r){if(r=Tp(r),e instanceof _r){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Ja("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===En?this.value="":this.value=this.operator+this.semver.version,Ja("comp",this)}parse(e){let r=this.options.loose?Cp[Op.COMPARATORLOOSE]:Cp[Op.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Ip(n[2],this.options.loose):this.semver=En}toString(){return this.value}test(e){if(Ja("Comparator.test",e,this.options.loose),this.semver===En||e===En)return!0;if(typeof e=="string")try{e=new Ip(e,this.options)}catch{return!1}return Va(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof _r))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new _p(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new _p(this.value,r).test(e.semver):(r=Tp(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Va(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Va(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};kp.exports=_r;var Tp=Vi(),{safeRe:Cp,t:Op}=Tr(),Va=Ua(),Ja=dn(),Ip=Y(),_p=ye()});var yn=p((dT,Dp)=>{var Mx=ye(),Ux=(t,e,r)=>{try{e=new Mx(e,r)}catch{return!1}return e.test(t)};Dp.exports=Ux});var $p=p((pT,Np)=>{var Hx=ye(),jx=(t,e)=>new Hx(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));Np.exports=jx});var Fp=p((mT,Ap)=>{var Wx=Y(),Gx=ye(),zx=(t,e,r)=>{let n=null,i=null,s=null;try{s=new Gx(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new Wx(n,r))}),n};Ap.exports=zx});var Bp=p((gT,qp)=>{var Vx=Y(),Jx=ye(),Yx=(t,e,r)=>{let n=null,i=null,s=null;try{s=new Jx(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new Vx(n,r))}),n};qp.exports=Yx});var Hp=p((wT,Up)=>{var Ya=Y(),Xx=ye(),Mp=pn(),Zx=(t,e)=>{t=new Xx(t,e);let r=new Ya("0.0.0");if(t.test(r)||(r=new Ya("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],s=null;i.forEach(o=>{let a=new Ya(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||Mp(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||Mp(r,s))&&(r=s)}return r&&t.test(r)?r:null};Up.exports=Zx});var Wp=p((ET,jp)=>{var Kx=ye(),Qx=(t,e)=>{try{return new Kx(t,e).range||"*"}catch{return null}};jp.exports=Qx});var ns=p((yT,Jp)=>{var eb=Y(),Vp=wn(),{ANY:tb}=Vp,rb=ye(),nb=yn(),Gp=pn(),zp=Zi(),ib=Qi(),sb=Ki(),ob=(t,e,r,n)=>{t=new eb(t,n),e=new rb(e,n);let i,s,o,a,c;switch(r){case">":i=Gp,s=ib,o=zp,a=">",c=">=";break;case"<":i=zp,s=sb,o=Gp,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(nb(t,e,n))return!1;for(let l=0;l<e.set.length;++l){let u=e.set[l],f=null,d=null;if(u.forEach(h=>{h.semver===tb&&(h=new Vp(">=0.0.0")),f=f||h,d=d||h,i(h.semver,f.semver,n)?f=h:o(h.semver,d.semver,n)&&(d=h)}),f.operator===a||f.operator===c||(!d.operator||d.operator===a)&&s(t,d.semver))return!1;if(d.operator===c&&o(t,d.semver))return!1}return!0};Jp.exports=ob});var Xp=p((ST,Yp)=>{var ab=ns(),lb=(t,e,r)=>ab(t,e,">",r);Yp.exports=lb});var Kp=p((vT,Zp)=>{var ub=ns(),fb=(t,e,r)=>ub(t,e,"<",r);Zp.exports=fb});var tm=p((xT,em)=>{var Qp=ye(),hb=(t,e,r)=>(t=new Qp(t,r),e=new Qp(e,r),t.intersects(e,r));em.exports=hb});var nm=p((bT,rm)=>{var db=yn(),pb=Ee();rm.exports=(t,e,r)=>{let n=[],i=null,s=null,o=t.sort((u,f)=>pb(u,f,r));for(let u of o)db(u,e,r)?(s=u,i||(i=u)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[u,f]of n)u===f?a.push(u):!f&&u===o[0]?a.push("*"):f?u===o[0]?a.push(`<=${f}`):a.push(`${u} - ${f}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var lm=p((PT,cm)=>{var im=ye(),Za=wn(),{ANY:Xa}=Za,Sn=yn(),Ka=Ee(),mb=(t,e,r={})=>{if(t===e)return!0;t=new im(t,r),e=new im(e,r);let n=!1;e:for(let i of t.set){for(let s of e.set){let o=wb(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},gb=[new Za(">=0.0.0-0")],sm=[new Za(">=0.0.0")],wb=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Xa){if(e.length===1&&e[0].semver===Xa)return!0;r.includePrerelease?t=gb:t=sm}if(e.length===1&&e[0].semver===Xa){if(r.includePrerelease)return!0;e=sm}let n=new Set,i,s;for(let h of t)h.operator===">"||h.operator===">="?i=om(i,h,r):h.operator==="<"||h.operator==="<="?s=am(s,h,r):n.add(h.semver);if(n.size>1)return null;let o;if(i&&s){if(o=Ka(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let h of n){if(i&&!Sn(h,String(i),r)||s&&!Sn(h,String(s),r))return null;for(let g of e)if(!Sn(h,String(g),r))return!1;return!0}let a,c,l,u,f=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,d=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&s.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let h of e){if(u=u||h.operator===">"||h.operator===">=",l=l||h.operator==="<"||h.operator==="<=",i){if(d&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===d.major&&h.semver.minor===d.minor&&h.semver.patch===d.patch&&(d=!1),h.operator===">"||h.operator===">="){if(a=om(i,h,r),a===h&&a!==i)return!1}else if(i.operator===">="&&!Sn(i.semver,String(h),r))return!1}if(s){if(f&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===f.major&&h.semver.minor===f.minor&&h.semver.patch===f.patch&&(f=!1),h.operator==="<"||h.operator==="<="){if(c=am(s,h,r),c===h&&c!==s)return!1}else if(s.operator==="<="&&!Sn(s.semver,String(h),r))return!1}if(!h.operator&&(s||i)&&o!==0)return!1}return!(i&&l&&!s&&o!==0||s&&u&&!i&&o!==0||d||f)},om=(t,e,r)=>{if(!t)return e;let n=Ka(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},am=(t,e,r)=>{if(!t)return e;let n=Ka(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};cm.exports=mb});var dm=p((RT,hm)=>{var Qa=Tr(),um=hn(),Eb=Y(),fm=qa(),yb=Wt(),Sb=Nd(),vb=Ad(),xb=Bd(),bb=Hd(),Pb=Wd(),Rb=zd(),Lb=Jd(),Tb=Xd(),Cb=Ee(),Ob=ep(),Ib=rp(),_b=Xi(),kb=op(),Db=cp(),Nb=pn(),$b=Zi(),Ab=Ba(),Fb=Ma(),qb=Ki(),Bb=Qi(),Mb=Ua(),Ub=wp(),Hb=wn(),jb=ye(),Wb=yn(),Gb=$p(),zb=Fp(),Vb=Bp(),Jb=Hp(),Yb=Wp(),Xb=ns(),Zb=Xp(),Kb=Kp(),Qb=tm(),e0=nm(),t0=lm();hm.exports={parse:yb,valid:Sb,clean:vb,inc:xb,diff:bb,major:Pb,minor:Rb,patch:Lb,prerelease:Tb,compare:Cb,rcompare:Ob,compareLoose:Ib,compareBuild:_b,sort:kb,rsort:Db,gt:Nb,lt:$b,eq:Ab,neq:Fb,gte:qb,lte:Bb,cmp:Mb,coerce:Ub,Comparator:Hb,Range:jb,satisfies:Wb,toComparators:Gb,maxSatisfying:zb,minSatisfying:Vb,minVersion:Jb,validRange:Yb,outside:Xb,gtr:Zb,ltr:Kb,intersects:Qb,simplifyRange:e0,subset:t0,SemVer:Eb,re:Qa.re,src:Qa.src,tokens:Qa.t,SEMVER_SPEC_VERSION:um.SEMVER_SPEC_VERSION,RELEASE_TYPES:um.RELEASE_TYPES,compareIdentifiers:fm.compareIdentifiers,rcompareIdentifiers:fm.rcompareIdentifiers}});var ec=p((OT,ym)=>{"use strict";var wm=require("child_process"),s0=1024*1024,Em={exec(t,e){wm.exec(t,{maxBuffer:2*s0,windowsHide:!0},e)},spawn(t,e,r){return wm.spawn(t,e,r)},stripLine(t,e){let r=0;for(;e-- >0;){let n=t.indexOf(`
`,r);n>=0&&(r=n+1)}return r>0?t.substring(r):t},split(t,e){let r=t.trim().split(/\s+/);return r.length>e&&(r[e-1]=r.slice(e-1).join(" ")),r},extractColumns(t,e,r){let n=t.split(/(\r\n|\n|\r)/),i=[];return r||(r=Math.max.apply(null,e)+1),n.forEach(s=>{let o=Em.split(s,r),a=[];e.forEach(c=>{a.push(o[c]||"")}),i.push(a)}),i},parseTable(t){let e=t.split(/(\r\n\r\n|\r\n\n|\n\r\n)|\n\n/).filter(r=>r.trim().length>0).map(r=>r.split(/(\r\n|\n|\r)/).filter(n=>n.trim().length>0));return e.forEach(r=>{for(let n=0;r[n];){let i=r[n];i.startsWith(" ")?(r[n-1]+=i.trimLeft(),r.splice(n,1)):n+=1}}),e.map(r=>{let n={};return r.forEach(i=>{let s=i.indexOf(":"),o=i.slice(0,s).trim();n[o]=i.slice(s+1).trim()}),n})}};ym.exports=Em});var vm=p((IT,Sm)=>{"use strict";var o0=require("os"),is=require("fs"),Se=ec(),a0=t=>new Promise((e,r)=>{is.existsSync(t)?e():is.mkdir(t,n=>{n?r(n):e()})}),tc={darwin(t){return new Promise((e,r)=>{Se.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(n,i,s){if(n)r(n);else{if(n=s.toString().trim(),n){r(n);return}let o=Se.stripLine(i.toString(),2),a=Se.extractColumns(o,[0,3,8],10).filter(c=>!!String(c[0]).match(/^(udp|tcp)/)).find(c=>{let l=String(c[1]).match(/\.(\d+)$/);if(l&&l[1]===String(t))return!0});a&&a[2].length?e(parseInt(a[2],10)):r(new Error(`pid of port (${t}) not found`))}})})},freebsd:"darwin",sunos:"darwin",linux(t){return new Promise((e,r)=>{let n="netstat -tunlp";Se.exec(n,function(i,s,o){if(i)r(i);else{let a=o.toString().trim();a&&console.warn(a);let c=Se.stripLine(s.toString(),2),l=Se.extractColumns(c,[3,6],7).find(u=>{let f=String(u[0]).match(/:(\d+)$/);if(f&&f[1]===String(t))return!0});if(l&&l[1]){let u=l[1].split("/",1)[0];u.length?e(parseInt(u,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})},win32(t){return new Promise((e,r)=>{Se.exec("netstat -ano",function(n,i,s){if(n)r(n);else{if(n=s.toString().trim(),n){r(n);return}let o=Se.stripLine(i.toString(),4),a=Se.extractColumns(o,[1,4],5).find(c=>{let l=String(c[0]).match(/:(\d+)$/);if(l&&l[1]===String(t))return!0});a&&a[1].length&&parseInt(a[1],10)>0?e(parseInt(a[1],10)):r(new Error(`pid of port (${t}) not found`))}})})},android(t){return new Promise((e,r)=>{let n=o0.tmpdir()+"/.find-process",i=n+"/"+process.pid,s='netstat -tunp >> "'+i+'"';a0(n).then(()=>{Se.exec(s,()=>{is.readFile(i,"utf8",(o,a)=>{if(is.unlink(i,()=>{}),o)r(o);else{a=Se.stripLine(a,2);let c=Se.extractColumns(a,[3,6],7).find(l=>{let u=String(l[0]).match(/:(\d+)$/);if(u&&u[1]===String(t))return!0});if(c&&c[1]){let l=c[1].split("/",1)[0];l.length?e(parseInt(l,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})})})}};function c0(t){let e=process.platform;return new Promise((r,n)=>{if(!(e in tc))return n(new Error(`platform ${e} is unsupported`));let i=tc[e];typeof i=="string"&&(i=tc[i]),i(t).then(r,n)})}Sm.exports=c0});var Rm=p((_T,Pm)=>{"use strict";var ss=require("path"),bt=ec();function rc(t,e){return e?t&&t.match?t.match(e):!1:!0}function xm(t){let e=t.split(ss.sep),r=e[e.length-1];r&&(e[e.length-1]=r.split(" ")[0]);let n=[];for(let i of e){let s=i.indexOf(" -");if(s>=0){n.push(i.substring(0,s).trim());break}else if(i.endsWith(" ")){n.push(i.trim());break}n.push(i)}return n.join(ss.sep)}function bm(t){if(process.platform==="darwin"){let e=t.indexOf(".app/");if(e>=0)return ss.basename(t.substring(0,e))}return ss.basename(t)}var nc={darwin(t){return new Promise((e,r)=>{let n;"pid"in t?n=`ps -p ${t.pid} -ww -o pid,ppid,uid,gid,args`:n="ps ax -ww -o pid,ppid,uid,gid,args",bt.exec(n,function(i,s,o){if(i)"pid"in t?e([]):r(i);else{if(i=o.toString().trim(),i){r(i);return}let a=bt.stripLine(s.toString(),1),l=bt.extractColumns(a,[0,1,2,3,4],5).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[4]&&t.name?rc(u[4],t.name):!!u[0]).map(u=>{let f=String(u[4]),d=xm(f);return{pid:parseInt(u[0],10),ppid:parseInt(u[1],10),uid:parseInt(u[2],10),gid:parseInt(u[3],10),name:bm(d),bin:d,cmd:u[4]}});t.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})},linux:"darwin",sunos:"darwin",freebsd:"darwin",win32(t){return new Promise((e,r)=>{let n="Get-CimInstance -className win32_process | select Name,ProcessId,ParentProcessId,CommandLine,ExecutablePath",i=[],s=bt.spawn("powershell.exe",["/c",n],{detached:!1,windowsHide:!0});s.stdout.on("data",o=>{i.push(o.toString())}),s.on("close",o=>{if(o!==0)return r(new Error("Command '"+n+"' terminated with code: "+o));let a=bt.parseTable(i.join("")).filter(c=>{if("pid"in t)return c.ProcessId===String(t.pid);if(t.name){let l=c.Name||"";return t.strict?l===t.name||l.endsWith(".exe")&&l.slice(0,-4)===t.name:rc(c.CommandLine||l,t.name)}else return!0}).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name||"",cmd:c.CommandLine}));e(a)})})},android(t){return new Promise((e,r)=>{let n="ps";bt.exec(n,function(i,s,o){if(i)"pid"in t?e([]):r(i);else{if(i=o.toString().trim(),i){r(i);return}let a=bt.stripLine(s.toString(),1),l=bt.extractColumns(a,[0,3],4).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[1]&&t.name?rc(u[1],t.name):!!u[0]).map(u=>{let f=String(u[1]),d=xm(f);return{pid:parseInt(u[0],10),name:bm(d),bin:d,cmd:f}});t.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})}};function l0(t){let e=process.platform;return new Promise((r,n)=>{if(!(e in nc))return n(new Error(`platform ${e} is unsupported`));let i=nc[e];typeof i=="string"&&(i=nc[i]),i(t).then(r,n)})}Pm.exports=l0});var Cm=p((kT,Tm)=>{"use strict";var u0=vm(),Lm=Rm(),ic={port(t,e){return u0(t,e).then(r=>ic.pid(r,e),()=>[])},pid(t,e){return Lm({pid:t,strict:e})},name(t,e){return Lm({name:t,strict:e})}};function f0(t,e,r){return new Promise((n,i)=>{if(!(t in ic))i(new Error(`do not support find by "${t}"`));else{let s=/^\d+$/.test(e);t==="pid"&&!s?i(new Error("pid must be a number")):t==="port"&&!s?i(new Error("port must be a number")):ic[t](e,r).then(n,i)}})}Tm.exports=f0});var Im=p((DT,Om)=>{"use strict";Om.exports=Cm()});var oc=p((pO,Bm)=>{var dO=Bm.exports=function(t){(function e(){var r=!0,n=!1,i=!1;do i=!0,r=!1,t.call(this,function(){i?r=!0:e()}),i=!1;while(r)})()}});var Um=p((mO,Mm)=>{var v0=oc();Mm.exports=function(t,e){return function(r){var n=[],i,s;function o(l){n.push(l)}t=t||function(l){this.queue(l)},e=e||function(){this.queue(null)};var a={emit:function(l,u){l=="data"&&o(u),l=="end"&&(i=!0,o(null)),l=="error"&&(s=u)},queue:o},c;return function(l,u){if(i=i||l,l)return r(l,function(){if(c){var f=c;c=null,f(l)}u(l)});c=u,v0(function f(d){if(c)if(u=c,s)c=null,u(s);else if(n.length){var h=n.shift();c=null,u(h===null,h)}else r(i,function(g,S){if(g&&g!==!0)return s=g,d();if(i=i||g)e.call(a);else if(S!==null&&(t.call(a,S),s||i))return r(s||i,function(){c=null,u(s||i)});d(f)})})}}}});var jm=p((gO,Hm)=>{Hm.exports=function(){var t=[],e=0;function r(){return t.reduce(function(n,i){return n+i.length},0)}return{length:e,data:this,add:function(n){if(!Buffer.isBuffer(n))throw new Error("data must be a buffer, was: "+JSON.stringify(n));return this.length=e=e+n.length,t.push(n),this},has:function(n){return n==null?e>0:e>=n},get:function(n){var i;if(n==null||n===e){e=0;var s=t;return t=[],s.length==1?s[0]:Buffer.concat(s)}else if(t.length>1&&n<=(i=t[0].length)){var o=t[0].slice(0,n);return n===i?t.shift():t[0]=t[0].slice(n,i),e-=n,o}else if(n<e){for(var a=[],c=0;c+t[0].length<n;){var l=t.shift();c+=l.length,a.push(l)}return c<n&&(a.push(t[0].slice(0,n-c)),t[0]=t[0].slice(n-c,t[0].length),this.length=e=e-n),Buffer.concat(a)}else throw new Error("could not get "+n+" bytes")}}}});var Vm=p((wO,zm)=>{"use strict";var x0=jm();function b0(t){return Number.isFinite(t)}function Wm(t){return typeof t=="function"}function Gm(t,e){return e?function(r,n){var i=setTimeout(function(){t(new Error("pull-reader: read exceeded timeout"),n)},e);t(r,function(s,o){clearTimeout(i),n(s,o)})}:t}zm.exports=function(t){var e=[],r,n,i=!1,s=x0(),o,a,c;function l(){for(;e.length;)if(e[0].length==null&&s.has(1))e.shift().cb(null,s.get());else if(s.has(e[0].length)){var d=e.shift();d.cb(null,s.get(d.length))}else if(o==!0&&e[0].length&&s.length<e[0].length){var h="stream ended with:"+s.length+" but wanted:"+e[0].length;e.shift().cb(new Error(h))}else if(o)e.shift().cb(o);else return!!e.length;return e.length||!s.has(1)||c}function u(){var d=l();d&&!i&&r&&!i&&!a&&(i=!0,n(null,function(h,g){if(i=!1,h)return o=h,l();s.add(g),u()}))}function f(d){if(c){for(;e.length;)e.shift().cb(c);return cb&&cb(c)}n=Gm(d,t),r=d,u()}return f.abort=function(d,h){c=d||!0,r?(i=!0,r(c,function(){for(;e.length;)e.shift().cb(c);h&&h(c)})):h()},f.read=function(d,h,g){if(Wm(h)&&(g=h,h=t),Wm(g))e.push({length:b0(d)?d:null,cb:g}),u();else return a=!0,function(S,w){if(i||s.has(1)){if(S)return r(S,w);e.push({length:null,cb:w}),u()}else Gm(r,h)(S,function(m,P){w(m,P)})}},f}});var sg=p((Jt,ig)=>{var P0=Um(),R0=Vm(),Jm=zi(),Ym=0,Xm=1,Zm=2,Km="GOODBYE";function Qm(t){let e=Buffer.alloc(9),r=0,n=t.value!==void 0?t.value:t.end;return typeof t=="string"&&t===Km?(e.fill(0),[e,null]):(typeof n=="string"?(r=Xm,n=Buffer.from(n,"utf-8")):Buffer.isBuffer(n)?r=Ym:(r=Zm,n=Buffer.from(JSON.stringify(n),"utf-8")),r=t.stream<<3|t.end<<2|r,e[0]=r,e.writeUInt32BE(n.length,1),e.writeInt32BE(t.req||0,5),[e,n])}function eg(t){if(t.length!==9)throw new Error("expected header to be 9 bytes long");let e=t[0],r=t.readUInt32BE(1);return{req:t.readInt32BE(5),stream:!!(e&8),end:!!(e&4),value:null,length:r,type:e&3}}function tg(t,e){if(t.length!==e.length)throw new Error("incorrect length, expected:"+e.length+" found:"+t.length);if(e.type===Ym)e.value=t;else if(e.type===Xm)e.value=t.toString();else if(e.type===Zm)e.value=JSON.parse(t.toString());else throw new Error("unknown message type");return e}function rg(t){return P0(function(r){t&&t("encoded: %o",r);let[n,i]=Qm(r);this.queue(n),i!==null&&this.queue(i)})}function ng(t){let e=R0(),r=!1;return function(i){return e(i),function(o,a){if(r)return a(!0);if(o)return e.abort(o,a);e.read(9,function(l,u){if(l)return a(l);let f=eg(u);if(f.length===0)return r=!0,a(null,Km);e.read(f.length,function(h,g){if(h)return a(h);try{tg(g,f)}catch(S){return a(S)}t&&t("decoded: %o",f),a(null,f)})})}}}Jt=ig.exports=function(e,r){let n=r===!0?Jm("packet-stream-codec"):typeof r=="string"?Jm(r):null;return{source:rg(n)(e.source),sink(i){return e.sink(ng(n)(i))}}};Jt.encodePair=Qm;Jt.decodeHead=eg;Jt.decodeBody=tg;Jt.encode=rg;Jt.decode=ng});var ac=p((EO,og)=>{function L0(t){return t&&(t===!0?!0:{message:t.message,name:t.name,stack:t.stack})}function T0(t){console.error("packet-stream asked to read after closed",t)}og.exports={flat:L0,closedread:T0}});var lg=p((yO,cg)=>{var{flat:ag,closedread:C0}=ac();function ls(t,e,r){this.id=t,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=e,this._remove=r}ls.prototype.write=function(t,e){let r=this._ps;e?(this.writeEnd=e,r&&(r.read({req:this.id,stream:!0,end:!0,value:ag(e)}),this.readEnd&&this.destroy(e),r._maybedone(e))):r&&r.read({req:this.id,stream:!0,end:!1,value:t})};ls.prototype.end=function(t){this.write(null,ag(t||!0))};ls.prototype.destroy=function(t){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}this.write(null,t)}this._ps&&(this._remove(),this._remove=null,this.read=C0,this._ps=null)};cg.exports=ls});var hg=p((SO,fg)=>{var ug=lg(),{flat:cc,closedread:O0}=ac();function xe(t){this.ended=!1,this.opts=t,this._req_counter=1,this._requests=new Map,this._instreams=new Map,this._outstreams=new Map,this._closecbs=[],this._closing=!1,this._closed=!1,t.close&&this._closecbs.push(t.close)}xe.prototype.message=function(t){this.read({req:0,stream:!1,end:!1,value:t})};xe.prototype.request=function(t,e){if(this._closing)return e(new Error("parent stream is closing"));let r=this._req_counter++;this._requests.set(r,(n,i)=>{this._requests.delete(r),e(n,i),this._maybedone(n)}),this.read({req:r,stream:!1,end:!1,value:t})};xe.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");let t=this._req_counter++,e=new ug(t,this,()=>{this._outstreams.delete(t)});return this._outstreams.set(t,e),e};xe.prototype.close=function(t){if(!t)throw new Error("packet-stream.close *must* have callback");if(this._closed)return t();this._closecbs.push(t),this._closing=!0,this._maybedone()};xe.prototype.destroy=function(t){t=t||cc(t),this.ended=t,this._closing=!0;let e=t===!0?new Error("unexpected end of parent stream"):t,r=0;this._requests.forEach(n=>{r++,n(e)}),this._instreams.forEach(n=>{r++,n.writeEnd=!0,n.destroy(e)}),this._outstreams.forEach(n=>{r++,n.writeEnd=!0,n.destroy(e)}),r===0&&t===!0&&(e=null),this._maybedone(e)};xe.prototype._maybedone=function(t){this._closed||!this._closing||this._requests.size!==0||this._instreams.size!==0||this._outstreams.size!==0||(this.read(null,t||!0),this._closed=!0,this._closecbs.forEach(e=>{e(t)}),this.opts=null,this._closecbs.length=0,this.read=O0,this._requests.clear(),this._instreams.clear(),this._outstreams.clear())};xe.prototype.read=function(t){console.error("please overwrite read method to do IO",t)};xe.prototype.write=function(t,e){this.ended||(e?this.destroy(e):t.req&&!t.stream?this._onrequest(t):t.req&&t.stream?this._onstream(t):this._onmessage(t))};xe.prototype._onmessage=function(t){this.opts&&typeof this.opts.message=="function"&&this.opts.message(t.value)};xe.prototype._onrequest=function(t){let e=t.req*-1;if(t.req<0)this._requests.has(e)&&this._requests.get(e)(t.end?t.value:null,t.end?null:t.value);else if(this.opts&&typeof this.opts.request=="function"){let r=!1;this.opts.request(t.value,(n,i)=>{if(r)throw new Error("cb called twice from local api");r=!0,n?this.read({value:cc(n),end:!0,req:e}):this.read({value:i,end:!1,req:e}),this._maybedone()})}else{if(this.ended){let r=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:cc(r),end:!0,stream:!1,req:e})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:e});this._maybedone()}};xe.prototype._onstream=function(t){if(t.req<0){let e=t.req*-1,r=this._outstreams.get(e);if(!r)return console.error("no stream for incoming msg",t);t.end?(r.writeEnd&&this._outstreams.delete(e),r.readEnd=!0,r.read(null,t.value),this._maybedone()):r.read(t.value)}else{let e=t.req,r=this._instreams.get(e);r||(r=new ug(e*-1,this,()=>{this._instreams.delete(e)}),this._instreams.set(e,r),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(r)),t.end?(r.writeEnd&&this._instreams.delete(e),r.readEnd=!0,r.read&&r.read(null,t.value),this._maybedone()):r.read?r.read(t.value):console.error("no .read for stream:",r.id,"dropped:",t)}};fg.exports=t=>new xe(t)});var pg=p((vO,bn)=>{"use strict";var I0=cn();function _0(t){let e=!1;return(r,n)=>{e||(e=!0,t(r,n))}}function lc(t,e){let r=[],n=!1,i=!1,s,o,a=_0((c,l)=>{e&&e(c,l),t=null,e=null,s=null,o&&o(c||!0,()=>{})});return t.read=function(c,l){if(n=n||l,s){let u=s;s=null,u(n,c)}else!n&&!i&&r.push(c);n&&a(n!==!0?n:null)},{source(c,l){c?(t&&t.write(null,c),l(c),r.length=0,i=!0,a(c!==!0?c:null)):r.length?l(null,r.shift()):n?l(n):s=l},sink(c){if(n)return o=null,c(n,()=>{});o=c,I0.drain(l=>{if(n)return!1;t.write(l)},l=>{t&&!t.writeEnd&&t.write(null,l||!0),a&&a(l)})(c)}}}function dg(t,e){return lc(t,r=>{t.writeEnd||t.write(null,r||!0),e&&e(r)})}function k0(t){return dg(t).source}function D0(t,e){return dg(t,e).sink}bn.exports=lc;bn.exports.source=k0;bn.exports.sink=D0;bn.exports.duplex=lc});var gg=p((xO,mg)=>{mg.exports=function(e){var r,n,i;function s(o){return function(a,c){o(a,function(l,u){if(l&&!i)return i=!0,c(null,e);l&&r?c(l):l?n=c:c(null,u)})}}return s.end=function(){return r=!0,n&&n(r),s},s}});var Eg=p((bO,wg)=>{var N0=gg(),uc=cn();wg.exports=function(t,e){e=e||"GOODBYE";var r=N0(e);return{source:uc(t.source,r),sink:uc(uc.filter(function(n){if(n!==e)return!0;r.end()}),t.sink)}}});var Pn=p(Ie=>{"use strict";var us=cn();function $0(t){return t?Object.keys(t).length===0:!0}Ie.set=function(e,r,n){let i,s;for(let o=0;o<r.length;o++){let a=r[o];e[a]=e[a]||{},i=e,s=a,e=e[a]}i[s]=n};Ie.get=function(e,r){if(typeof r=="string")return e[r];let n;for(let i=0;i<r.length;i++){let s=r[i];if(n=e=e[s],e==null)return e}return n};Ie.prefix=function(e,r){let n;for(let i=0;i<r.length;i++){let s=r[i];if(n=e=e[s],typeof e!="object")return e}return typeof n!="object"?!!n:!1};function A0(t,e){for(let r in e){let n=e[r];t[n]||(t[n]={}),t=t[n]}return t}function F0(t,e){(function r(n,i){let s=e[i];if(n)e.length-1===i?delete n[s]:i<e.length&&r(n[s],i+1);else return;$0(n[s])&&delete n[s]})(t,0)}function q0(t,e){for(let r in e)t[r]=e[r];return t}Ie.mount=function(e,r,n){if(!Array.isArray(r))throw new Error("path must be array of strings");return q0(A0(e,r),n)};Ie.unmount=function(e,r){return F0(e,r)};var fs=t=>t==="source",hs=t=>t==="sink",fc=t=>t==="duplex",B0=t=>t==="sync",M0=t=>t==="async",yg=t=>B0(t)||M0(t),U0=t=>fs(t)||hs(t)||fc(t);Ie.isRequest=yg;Ie.isStream=U0;function hc(t){return function(e){e(t||!0,()=>{})}}function Sg(t){return{source:us.error(t),sink:hc(t)}}Ie.errorAsStream=function(e,r){return fs(e)?us.error(r):hs(e)?hc(r):Sg(r)};Ie.errorAsStreamOrCb=function(e,r,n){return yg(e)?n(r):fc(e)?Sg(r):fs(e)?us.error(r):hs(e)?hc(r):n(r)};Ie.pipeToStream=function(e,r,n){fs(e)?r(n):hs(e)?n(r):fc(e)&&us(r,n,r)}});var dc=p((RO,vg)=>{"use strict";function H0(t){return typeof t=="string"?[`Error: ${t}`]:t.stack?t.stack.split(`
`):[`${t.name}: ${t.message}`]}vg.exports=function(e,r){let n=new Error(r),i=n.stack.split(`
`);i.splice(1,1);let s=H0(e);s[0]="  "+s[0];for(let o=1;o<i.length;o++)if(s.includes(i[o])){i.splice(o);break}return n.stack=i.concat(s).join(`
`),n}});var Rg=p((LO,Pg)=>{"use strict";var j0=hg(),pc=pg(),W0=Eg(),kr=Pn(),xg=dc(),bg=zi()("muxrpc:psc");Pg.exports=function(e,r,n){let i=j0({message(){},request(o,a){if(!Array.isArray(o.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(o)}`));let c=o.name,l=o.args,u=!1,f=!1;l.push((d,h)=>{f=!0,u=!0,a(d,h)});try{e("async",c,l)}catch(d){if(u||f)throw xg(d,"no callback provided to muxrpc async funtion");a(d)}},stream(o){o.read=function(c,l){if(l)return o.write(null,l);let{name:u,type:f,args:d}=c,h,g;if(o.read=null,!kr.isStream(f))return o.write(null,new Error(`unsupported stream type: ${f}`));try{g=e(f,u,d)}catch(m){h=m}let w=pc[f==="source"?"sink":f==="sink"?"source":"duplex"](o);return kr.pipeToStream(f,w,h?kr.errorAsStream(f,h):g)}},close(o){if(i=null,s.ended=!0,!s.closed&&(s.closed=!0,n)){let a=n;n=null,a(o)}}}),s=W0(pc(i,()=>{}));return s=r?r(s,bg.enabled?bg.namespace:!1):s,s.remoteCall=function(o,a,c,l){if(a==="emit")return i.message(c);if(!(kr.isRequest(o)||kr.isStream(o)))throw new Error(`unsupported type: ${JSON.stringify(o)}`);if(kr.isRequest(o))return i.request({name:a,args:c},l);let u=i.stream(),f=pc[o](u,l);return u.write({name:a,args:c,type:o}),f},s.isOpen=function(){return!i.ended},s.close=function(o,a){if(typeof o=="function"&&(a=o,o=!1),!i){a&&a();return}if(o){i.destroy(o),a&&a();return}return i.close(c=>{if(a)a(c);else if(c)throw xg(c,"no callback provided for muxrpc close")}),this},s.closed=!1,s}});var Tg=p((TO,Lg)=>{"use strict";var G0=dc(),z0=Pn();function mc(t,e,r,n){for(let i in e){let s=e[i],o=r?r.concat(i):[i];if(s&&typeof s=="object"){let a=s;t[i]=mc({},a,o,n)}else{let a=s;t[i]=(...c)=>n(a,o,c)}}return t}function V0(t){if(t)throw G0(t,"callback not provided")}function J0(t,e,r,n){t=t||{};function i(s,o,a){let c=typeof a[a.length-1]=="function"?a.pop():s==="sync"||s==="async"?null:V0;if(typeof c=="function"){let l;try{l=r(s,o,a,c)}catch(u){return z0.errorAsStreamOrCb(s,u,c)}return l}else return new Promise((l,u)=>{r(s,o,a,(f,d)=>{f?u(f):l(d)})})}return n?i("async","manifest",[function(s,o){if(s)return n(s);mc(t,o,null,i),n(null,o,t)}]):mc(t,e,null,i),t}Lg.exports=J0});var Ig=p((CO,Og)=>{"use strict";var ds=Pn();function Cg(t){return Array.isArray(t)?t:t.split(".")}function Y0(t){return t&&typeof t.pre=="function"&&typeof t.test=="function"&&typeof t.post=="function"}Og.exports=function(e){if(Y0(e))return e;if(typeof e=="function")return{pre:e};let r=null,n={};function i(s){if(s.allow){r={};for(let o of s.allow)ds.set(r,Cg(o),!0)}else r=null;if(s.deny)for(let o of s.deny)ds.set(n,Cg(o),!0);else n={};return this}return e&&i(e),i.pre=s=>{if(s=Array.isArray(s)?s:[s],r&&!ds.prefix(r,s))return new Error(`method:${s} is not in list of allowed methods`);if(n&&ds.prefix(n,s))return new Error(`method:${s} is on list of disallowed methods`)},i.post=()=>{},i.test=s=>i.pre(s),i.get=()=>({allow:r,deny:n}),i}});var kg=p((OO,_g)=>{"use strict";var X0=Ig(),gc=Pn();_g.exports=function(e,r,n){n=X0(n);function i(o,a){return o===gc.get(r,a)}function s(o,a,c){if(a==="emit")throw new Error("emit has been removed");if(o==="async"&&i("sync",a)){let l=c.pop(),u;try{u=gc.get(e,a).apply(this,c)}catch(f){return l(f)}return l(null,u)}if(!i(o,a))throw new Error(`no ${o}:${a}`);return gc.get(e,a).apply(this,c)}return function(a,c,l){let u=n.pre(c,l);if(u)throw u;return s.call(this,a,c,l)}}});var $g=p((IO,Ng)=>{"use strict";var Z0=sg(),K0=require("events").EventEmitter,Q0=Rg(),eP=Tg(),tP=kg();function Dg(t,e,r,n,i,s,o){let a;typeof t=="function"&&(a=t,t={}),e=e||{},t=t||{};let c=new K0;s||(s=Z0);let l,u={_emit(d,h){return c&&c._emit(d,h),u},id:n},f=Q0(tP(r,e,i).bind(u),s,d=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),l)){let h=l;l=null,h(d)}});if(eP(c,t,(d,h,g,S)=>{if(f.closed)throw new Error("stream is closed");return f.remoteCall(d,h,g,S)},a),c._emit=c.emit,o){Object.__defineGetter__.call(c,"id",()=>u.id),Object.__defineSetter__.call(c,"id",h=>{u.id=h});let d=!0;c.createStream=h=>{if(l=h,d)return d=!1,f;throw new Error("one stream per rpc")}}else c.stream=f;return c.closed=!1,c.close=function(d,h){return f.close(d,h),this},c}Ng.exports=function(t,e,r){return arguments.length>3?Dg.apply(this,arguments):function(n,i,s){return Dg(t,e,n,s,i,r,!0)}}});var wc=p((at,qg)=>{var _O=La(),rP=oc();function Ag(t){t.destroy?t.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function Fg(t,e,r){var n,i=!1,s;function o(){s||(s=!0,r&&r(n===!0?null:n))}function a(){i||(i=!0,l(),n?o():t(n=!0,o))}function c(u){l(),n||t(n=u,o)}function l(){e.on("finish",a),e.removeListener("close",a),e.removeListener("error",c)}e.on("close",a),e.on("finish",a),e.on("error",c),process.nextTick(function(){rP(function(u){t(null,function(f,d){if(n=n||f,f===!0)return e._isStdio?o():e.end();if(n=n||f)return Ag(e),o(n);if(e._isStdio)e.write(d,function(){u()});else{var h=e.write(d);h===!1?e.once("drain",u):u()}})})})}function nP(t){var e=!1,r=!1,n;function i(){var s=t.read();if(s!==null&&n){var o=n;n=null,o(null,s)}}return t.on("readable",function(){r=!0,n&&i()}).on("end",function(){e=!0,n&&n(e)}).on("error",function(s){e=s,n&&n(e)}),function(s,o){n=o,e?o(e):r&&i()}}function ps(t){var e=[],r=[],n,i=!1,s;function o(){for(;(e.length||n)&&r.length;)r.shift()(e.length?null:n,e.shift());!e.length&&i&&(i=!1,t.resume())}return t.on("data",function(a){e.push(a),o(),e.length&&t.pause&&(i=!0,t.pause())}),t.on("end",function(){n=!0,o()}),t.on("close",function(){n=!0,o()}),t.on("error",function(a){n=a,o()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let u=function(){for(;r.length;)r.shift()(a);c(a)};var l=u;if(n)return u();t.once("close",u),Ag(t)}else r.push(c),o()}}var iP=ps,ms=function(t,e){return function(r){return Fg(r,t,e)}},gs=function(t){return ps(t)};at=qg.exports=function(t,e){return t.writable&&t.write?t.readable?function(r){return Fg(r,t,e),ps(t)}:ms(t,e):gs(t)};at.sink=ms;at.source=gs;at.read=iP;at.read1=ps;at.read2=nP;at.duplex=function(t,e){return{source:gs(t),sink:ms(t,e)}};at.transform=function(t){return function(e){var r=gs(t);return ms(t)(e),r}}});var Mg=p((kO,ws)=>{var sP=require("stream");ws.exports=Ec;ws.exports.source=function(t){return Ec(null,t)};ws.exports.sink=function(t){return Ec(t,null)};var Bg=typeof setImmediate>"u"?process.nextTick:setImmediate;function Ec(t,e){t&&typeof t=="object"&&(e=t.source,t=t.sink);var r=[],n=[],i,s,o=new sP;o.writable=o.readable=!0,o.write=function(w){return r.length?r.shift()(null,w):n.push(w),r.length||(s=!0),!!r.length},o.end=function(){e?n.length?S():e(i=!0,r.length?r.shift():function(){}):r.length&&r.shift()(!0)},o.source=function(w,m){n.length?(m(null,n.shift()),n.length||o.emit("drain")):((i=i||w)?m(i):r.push(m),s&&(s=!1,o.emit("drain")))};var a;t&&(a=t(o.source)),a&&!e&&(e=a);var c=[],l=[],u=!1,f=!1,d=!1;if(o.sink=function(w){e=w,Bg(S)},e){o.sink(e),o.paused=!0;var h=o.on.bind(o);o.on=(w,m)=>{var P=h(w,m);return w==="data"&&o.paused&&Bg(o.resume.bind(o)),P};var g=o.pipe.bind(o);o.pipe=function(w,m){var P=g(w,m);return o.paused&&o.resume(),P}}function S(){if(f=!1,!(!e||d)){for(;c.length&&!o.paused;)o.emit("data",c.shift());if(!o.paused){if(u)return o.emit("end");d=!0,e(null,function w(m,P){d=!1,o.paused?(m===!0?u=m:m?o.emit("error",m):c.push(P),f=!0):m&&(i=m)!==!0?o.emit("error",m):(i=i||m)?o.emit("end"):(o.emit("data",P),d=!0,e(null,w))})}}}return o.pause=function(){return o.paused=!0,o},o.resume=function(){return o.paused=!1,S(),o},o.destroy=function(){!i&&e&&e(i=!0,function(){}),i=!0,r.length&&r.shift()(!0),o.emit("close")},o}});var Hg=p((DO,Ug)=>{Ug.exports=oP;function oP(t,e){typeof t=="function"&&(e=t,t=!1);var r=[],n,i;function s(f,d){f&&(n=f,i&&u(n)),i=d,l()}var o;function a(f){o=o||f||!0,l()}function c(f){if(!o){if(i){u(n,f);return}r.push(f)}}if(t)return{push:c,end:a,source:s,buffer:r};return s.push=c,s.end=a,s.buffer=r,s;function l(){i&&(n?u(n):!r.length&&o?u(o):r.length&&u(null,r.shift()))}function u(f,d){var h=i;if(f&&e){var g=e;e=null,g(f===!0?null:f)}i=null,h(f,d)}}});var bs=N(require("http"));async function Ps(t){return new Promise((e,r)=>{let n=[];t.setEncoding("utf8"),t.on("data",i=>n.push(i)),t.on("error",i=>r(i)),t.on("end",()=>{let i=JSON.parse(n.join(""));e(i)})})}async function $r(t,e){return new Promise((r,n)=>{let s=bs.request({socketPath:t,path:"/",method:"POST"},o=>r(o));s.on("error",o=>n(o)),s.write(e),s.end()})}var rw=N(require("path"));async function Rs(t){let e=`for pid in \`cd /proc && ls -d [0-9]*\`; do { echo $pid ; readlink /proc/$pid/cwd || echo ; readlink /proc/$pid/ns/mnt || echo ; cat /proc/$pid/stat | tr "
" " " ; echo ; cat /proc/$pid/environ | tr "
" " " ; echo ; cat < /proc/$pid/cmdline | tr "
" " " ; echo ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null`,{stdout:r}=await t.exec(e,{logOutput:!1}),n=6,i=r.split(`
---
`),s=i.pop().trim();return{processes:i.map(a=>a.split(`
`)).filter(a=>a.length>=n).map(([a,c,l,u,f,d])=>{let h=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(u)||[];return{pid:a,ppid:h[1],pgrp:h[2],cwd:c,mntNS:l,cmd:d.replace(/\0/g," "),env:f.split("\0").reduce((g,S)=>{let w=S.indexOf("=");return w!==-1&&(g[S.substr(0,w)]=S.substr(w+1)),g},{})}}),mntNS:s}}var Cc=/VSCODE_REMOTE_CONTAINERS_SESSION=([^ ]+)/;async function Ln(t){let{processes:e}=await Rs(t);return e.filter(r=>r.env.VSCODE_REMOTE_CONTAINERS_SESSION||Cc.test(r.cmd)).map(r=>({...r,sessionId:r.env.VSCODE_REMOTE_CONTAINERS_SESSION||Cc.exec(r.cmd)[1]}))}var ys=N(require("path")),Jg=N(require("fs"));var Ss=N(require("child_process")),bc=require("string_decoder");var _c=N(require("os")),Ar=N(require("fs")),kc=N(require("path"));var ct=(a=>(a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off",a))(ct||{}),Oc={info:3,debug:2,trace:1},_P=Object.keys(Oc).reduce((t,e)=>(t[Oc[e]]=e,t),[]);var lw=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function Dc(t,e){let r=!!e;return{event:n=>{r&&(r=!1,t.forEach(i=>i.event({type:"text",level:3,timestamp:Date.now(),text:e}))),t.forEach(i=>i.event(n))}}}function Nc(t,e){let r=hw(t);return{event(n){let i=uw(n,e());i&&r.write(i)},join:r.join}}function Pt(t,e=2){return{event:t.event,write(r,n=e){t.event({type:"text",level:n,timestamp:Date.now(),text:r})},raw(r,n=e){t.event({type:"raw",level:n,timestamp:Date.now(),text:r})},start(r,n=e){let i=Date.now();return t.event({type:"start",level:n,timestamp:i,text:r}),i},stop(r,n,i=e){t.event({type:"stop",level:i,timestamp:Date.now(),text:r,startTimestamp:n})},get dimensions(){return t.dimensions},onDidChangeDimensions:t.onDidChangeDimensions}}function uw(t,e){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":case"raw":return`[${new Date(t.timestamp).toISOString()}] ${Ls(t.text)}`;case"start":return`[${new Date(t.timestamp).toISOString()}] Start: ${Ls(t.text)}`;case"stop":return 2>=e?`[${new Date(t.timestamp).toISOString()}] Stop (${t.timestamp-t.startTimestamp} ms): ${Ls(t.text)}`:void 0;default:throw fw(t)}}function Ls(t){return t.replace(lw,"").replace(/(\r?\n)?$/,_c.EOL)}function fw(t){return new Error(`Unknown log event type: ${t.type}`)}function hw(t){let e=[],r=!1,n,i;function s(){r=!1,i&&!e.length&&(n=void 0,i(),i=void 0)}function o(a,c=!1){if(a&&e.push(a),!c&&!r&&e.length){r=!0;let l=e.join("");e.length=0,Ar.appendFile(t,l,u=>{u&&(u.code==="ENOENT"?Ar.mkdir(kc.dirname(t),{recursive:!0},f=>{f?(s(),console.error(f)):Ar.appendFile(t,l,d=>{s(),d&&console.error(d),o()})}):(s(),console.error(u))),s(),o()})}}return{write:o,join:()=>n||(r?n=new Promise(a=>i=a):Promise.resolve())}}function Rt(t){return t.split(/\r?\n/).map(e=>`\x1B[1m\x1B[31m${e}\x1B[39m\x1B[22m`).join(`\r
`)+`\r
`}var $c;(function(t){t[t.lineFeed=10]="lineFeed",t[t.carriageReturn=13]="carriageReturn",t[t.space=32]="space",t[t._0=48]="_0",t[t._1=49]="_1",t[t._2=50]="_2",t[t._3=51]="_3",t[t._4=52]="_4",t[t._5=53]="_5",t[t._6=54]="_6",t[t._7=55]="_7",t[t._8=56]="_8",t[t._9=57]="_9",t[t.a=97]="a",t[t.b=98]="b",t[t.c=99]="c",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.g=103]="g",t[t.h=104]="h",t[t.i=105]="i",t[t.j=106]="j",t[t.k=107]="k",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.p=112]="p",t[t.q=113]="q",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.v=118]="v",t[t.w=119]="w",t[t.x=120]="x",t[t.y=121]="y",t[t.z=122]="z",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.asterisk=42]="asterisk",t[t.backslash=92]="backslash",t[t.closeBrace=125]="closeBrace",t[t.closeBracket=93]="closeBracket",t[t.colon=58]="colon",t[t.comma=44]="comma",t[t.dot=46]="dot",t[t.doubleQuote=34]="doubleQuote",t[t.minus=45]="minus",t[t.openBrace=123]="openBrace",t[t.openBracket=91]="openBracket",t[t.plus=43]="plus",t[t.slash=47]="slash",t[t.formFeed=12]="formFeed",t[t.tab=9]="tab"})($c||($c={}));var Fc;(function(t){t.DEFAULT={allowTrailingComma:!1}})(Fc||(Fc={}));var qc;(function(t){t[t.None=0]="None",t[t.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=2]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",t[t.InvalidUnicode=4]="InvalidUnicode",t[t.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",t[t.InvalidCharacter=6]="InvalidCharacter"})(qc||(qc={}));var Bc;(function(t){t[t.OpenBraceToken=1]="OpenBraceToken",t[t.CloseBraceToken=2]="CloseBraceToken",t[t.OpenBracketToken=3]="OpenBracketToken",t[t.CloseBracketToken=4]="CloseBracketToken",t[t.CommaToken=5]="CommaToken",t[t.ColonToken=6]="ColonToken",t[t.NullKeyword=7]="NullKeyword",t[t.TrueKeyword=8]="TrueKeyword",t[t.FalseKeyword=9]="FalseKeyword",t[t.StringLiteral=10]="StringLiteral",t[t.NumericLiteral=11]="NumericLiteral",t[t.LineCommentTrivia=12]="LineCommentTrivia",t[t.BlockCommentTrivia=13]="BlockCommentTrivia",t[t.LineBreakTrivia=14]="LineBreakTrivia",t[t.Trivia=15]="Trivia",t[t.Unknown=16]="Unknown",t[t.EOF=17]="EOF"})(Bc||(Bc={}));var Mc;(function(t){t[t.InvalidSymbol=1]="InvalidSymbol",t[t.InvalidNumberFormat=2]="InvalidNumberFormat",t[t.PropertyNameExpected=3]="PropertyNameExpected",t[t.ValueExpected=4]="ValueExpected",t[t.ColonExpected=5]="ColonExpected",t[t.CommaExpected=6]="CommaExpected",t[t.CloseBraceExpected=7]="CloseBraceExpected",t[t.CloseBracketExpected=8]="CloseBracketExpected",t[t.EndOfFileExpected=9]="EndOfFileExpected",t[t.InvalidCommentToken=10]="InvalidCommentToken",t[t.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=12]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",t[t.InvalidUnicode=14]="InvalidUnicode",t[t.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",t[t.InvalidCharacter=16]="InvalidCharacter"})(Mc||(Mc={}));var jg=N(Sa());var cP=N(cn());var kS=N(require("path")),Ca=require("string_decoder");var Le="\u2404";async function Mt(t,e,r,n="linux",i="Container"){let s=typeof t=="function",o=n==="win32",a=s?await t({env:r?{VSCODE_REMOTE_CONTAINERS_SESSION:r}:{},cmd:o?"powershell":"/bin/sh",args:o?["-NoProfile","-Command","-"]:[],output:e}):t;if(!s){let d=o?`powershell -NoProfile -Command "powershell -NoProfile -Command -"
`:`/bin/sh -c 'echo ${Le}; /bin/sh'
`;a.stdin.write(d),await new Promise(g=>{let S="",w=new Ca.StringDecoder;a.stdout.on("data",function m(P){S+=w.write(P),S.includes(d)&&(a.stdout.off("data",m),g())})})}let c=DS(a),l;async function u(d,h){let g=l=(async()=>{try{await l}catch{}return f(Ta(n,d),h)})();try{return await Promise.race([g,c.unexpectedExit])}finally{c.disposeStdioListeners(),l===g&&(l=void 0)}}async function f(d,h){let g=`Run in ${i.toLowerCase()}: ${d.replace(/\n.*/g,"")}`,S;if((h==null?void 0:h.logOutput)!=="silent"&&(S=e.start(g,h==null?void 0:h.logLevel)),a.stdin.destroyed){e.write("Stdin closed!");let{code:_e,signal:Me}=await a.exit;return Promise.reject({message:`Shell server terminated (code: ${_e}, signal: ${Me})`,code:_e,signal:Me})}n==="win32"?a.stdin.write(`[Console]::Write('${Le}'); ( ${d} ); [Console]::Write("${Le}$LastExitCode ${Le}"); [Console]::Error.Write('${Le}')
`):a.stdin.write(`echo -n ${Le}; ( ${d} ); echo -n ${Le}$?${Le}; echo -n ${Le} >&2
`);let[w,m]=Qh(a.stdout,[1,2],(h==null?void 0:h.logOutput)==="continuous"?(_e,Me,Nr)=>{Me===1&&Nr===0&&e.write(_e,h==null?void 0:h.logLevel)}:()=>{}),P=Qh(a.stderr,[1],(h==null?void 0:h.logOutput)==="continuous"?(_e,Me,Nr)=>{Me===0&&Nr===0&&e.write(_e,h==null?void 0:h.logLevel)}:()=>{})[0];h!=null&&h.stdin&&(await w,a.stdin.write(h==null?void 0:h.stdin));let[k,H]=await m,[Xt]=await P,K=parseInt(H,10)||0;return((h==null?void 0:h.logOutput)===void 0||(h==null?void 0:h.logOutput)===!0)&&(e.write(k,h==null?void 0:h.logLevel),e.write(Xt,h==null?void 0:h.logLevel),K&&e.write(`Exit code ${K}`,h==null?void 0:h.logLevel)),(h==null?void 0:h.logOutput)==="continuous"&&K&&e.write(`Exit code ${K}`,h==null?void 0:h.logLevel),(h==null?void 0:h.logOutput)!=="silent"&&e.stop(g,S,h==null?void 0:h.logLevel),K?Promise.reject({message:`Command in ${i.toLowerCase()} failed: ${d}`,code:K,stdout:k,stderr:Xt}):{stdout:k,stderr:Xt}}return{exec:u,process:a,platform:n,path:Ta(n,kS)}}function Qh(t,e,r){let n=e.map(()=>{let u;return{promise:new Promise((d,h)=>u={resolve:d,reject:h}),...u}}),i=new Ca.StringDecoder("utf8"),s=[],o=0,a=[];function c(u){let f=i.write(u);l(f)}function l(u){let f=u.indexOf(Le);if(f!==-1){let d=u.substr(0,f);s.push(d),r(d,o,a.length),a.push(s.join("")),s.length=0,a.length===e[o]&&(n[o].resolve(a),o++,a=[],o===e.length&&t.off("data",c)),f+1<u.length&&l(u.substr(f+1))}else s.push(u),r(u,o,a.length)}return t.on("data",c),n.map(u=>u.promise)}function DS(t){let e,r=new Promise((c,l)=>e=l),n=[],i=[],s=c=>n.push(c),o=c=>i.push(c);return t.stdout.on("data",s),t.stderr.on("data",o),t.exit.then(({code:c,signal:l})=>{e(`Shell server terminated (code: ${c}, signal: ${l})
${Buffer.concat(n).toString()}
${Buffer.concat(i).toString()}`)},c=>{e(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:r,disposeStdioListeners:()=>{t.stdout.off("data",s),t.stderr.off("data",o),n.length=0,i.length=0}}}var E0=N(yd());var Dm=N(Sa());var y0=N(dm());var _=N(require("fs")),Be=require("util");var vn=(0,Be.promisify)(_.readFile),r0=(0,Be.promisify)(_.writeFile),LT=(0,Be.promisify)(_.appendFile),pm=(0,Be.promisify)(_.rename),mm=(0,Be.promisify)(_.readdir),n0=(0,Be.promisify)(_.unlink);var i0=(0,Be.promisify)(_.rmdir),gm=(0,Be.promisify)(_.rm),TT=(0,Be.promisify)(_.copyFile);var h0=N(Im());async function os(t){return new Promise(e=>setTimeout(e,t))}var ve=N(require("path")),qm=N(require("fs"));async function cs(t,e=process.cwd(),r=process.env){if(process.platform!=="win32")return t;if(ve.isAbsolute(t))return await sc(t)||t;if(/[/\\]/.test(t)){let o=ve.join(e,t);return await sc(o)||o}let n,i;if(r){for(let o of Object.keys(r))if(o.toLowerCase()==="path"){let a=r[o];typeof a=="string"&&(n=a,i=a.split(ve.delimiter).filter(Boolean),i.push(ve.join(r.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(i===void 0||i.length===0){let o=new Error(`No PATH to look up executable '${t}'.`);throw o.code="ENOENT",o}for(let o of i){let a;ve.isAbsolute(o)?a=ve.join(o,t):a=ve.join(e,o,t);let c=await sc(a);if(c)return c}let s=new Error(`Exectuable '${t}' not found on PATH '${n}'.`);throw s.code="ENOENT",s}var $m=process.env.PATHEXT,Am=$m?$m.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function sc(t){if(Am.indexOf(ve.extname(t))!==-1)return await Fm(t)?t:void 0;for(let e of Am){let r=t+e;if(await Fm(r))return r}}function Fm(t){return new Promise(e=>qm.stat(t,(r,n)=>e(!r&&n.isFile())))}var bI=$g(),PI=wc(),RI=Mg(),LI=Hg();var OI=wc();var zg=/^\\\\wsl(\.localhost|\$)?\\/;function Es(t){return zg.test(t.toLowerCase())}function yc(t){let e=t.toLowerCase(),r=zg.exec(e);if(!r)return"";let n=e.indexOf("\\",r[0].length);return t.substring(r[0].length,n)}async function Sc(t,e,r){let{stdout:n}=await Oe({exec:xn(void 0),cmd:"wsl",args:["-d",t,"-e","wslpath","-u",e],output:r});return n.toString().trim()}function xc(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var N_=ys.join(__dirname,"..","..","node_modules",".bin","ts-node"),Nm=ys.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function Oe(t){let{exec:e,cmd:r,args:n,cwd:i,env:s,stdin:o,output:a,print:c}=t,l=await e({cmd:r,args:n,cwd:i,env:s,output:a});return new Promise((u,f)=>{let d=[],h=[],g=c==="continuous"?new bc.StringDecoder:void 0;l.stdout.on("data",m=>{d.push(m),c==="continuous"&&a.write(g.write(m))}),l.stdout.on("error",m=>{if((m==null?void 0:m.code)!=="ENOTCONN")throw m});let S=c==="continuous"?new bc.StringDecoder:void 0;l.stderr.on("data",m=>{h.push(m),c==="continuous"&&a.write(Rt(S.write(m)))}),l.stderr.on("error",m=>{if((m==null?void 0:m.code)!=="ENOTCONN")throw m});let w=[];l.exit.then(({code:m})=>{try{w.forEach(H=>H.dispose());let P=Buffer.concat(d),k=Buffer.concat(h);(c===!0||m&&c==="onerror")&&(a.write(P.toString().replace(/\r?\n/g,`\r
`)),a.write(Rt(k.toString()))),c&&m&&a.write(`Exit code ${m}`),m?f({message:`Command failed: ${r} ${(n||[]).join(" ")}`,stdout:P,stderr:k,code:m}):u({stdout:P,stderr:k})}catch(P){f(P)}},f),o instanceof Buffer?(l.stdin.write(o,m=>{m&&f(m)}),l.stdin.end()):o instanceof Jg.ReadStream?o.pipe(l.stdin):typeof o=="function"&&w.push(o(m=>l.stdin.write(m)))})}function xn(t){return async function(e){let{cmd:r,args:n,output:i}=e,s=`Run: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,o=i.start(s),a=e.cwd||t,c=e.env?{...process.env,...e.env}:process.env,l=await cs(r,a,c),u=Ss.spawn(l,n,{cwd:a,env:c,windowsHide:!0});return{stdin:u.stdin,stdout:u.stdout,stderr:u.stderr,exit:new Promise((f,d)=>{u.once("error",h=>{i.stop(s,o),d(h)}),u.once("close",(h,g)=>{i.stop(s,o),f({code:h,signal:g})})}),async terminate(){u.kill("SIGKILL")}}}}function vc(t,e,r,n){return async function(i){let{env:s,cmd:o,args:a,output:c}=i,l=i.cwd||r,u=l?`cd '${l}' && `:"",f=Object.keys(s||{}).map(H=>s[H]===void 0?"":`${H}='${s[H]}' `).join(""),d=(a||[]).map(H=>` '${H.replace(/'/g,`'"'"'`)}'`).join(""),h=`${u}${f}${o}${d}`,g=h!==o?["/bin/sh","-c",h]:[h],S=[...e,...g],w=`Run: ${t} ${S.join(" ").replace(/\n.*/g,"")}`,m=c.start(w),P=await cs(t,process.cwd(),process.env),k=Ss.spawn(P,S,{windowsHide:!0,env:n?{...process.env,...n}:void 0});return{stdin:k.stdin,stdout:k.stdout,stderr:k.stderr,exit:new Promise((H,Xt)=>{k.once("error",K=>{c.stop(w,m),Xt(K)}),k.once("close",(K,_e)=>{c.stop(w,m),H({code:K,signal:_e})})}),async terminate(){k.kill("SIGKILL")}}}}async function Dr(t,e){if(Es(t)){let r=yc(t),n=await Sc(r,t,e);return vc("wsl",["-d",r,"-e"],n)}return xn(t)}function Ta(t,e){return e&&typeof e=="object"&&"win32"in e?t==="win32"?e.win32:e.posix:e}var hP=0;function vs(t){return t.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++hP)}:{}}async function Yt(t,...e){let r=Pc(t);return Oe({...r,args:(r.args||[]).concat(e)})}async function Yg(t,...e){let r=Pc(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return Oe({...r,args:(r.args||[]).concat(e)})}function Rn(t,e,r){return async function(n){let{exec:i,cmd:s,args:o,env:a}=Pc(t),{argsPrefix:c,args:l}=mP(e,r,n,!1);return i({cmd:s,args:(o||[]).concat(l),env:a,output:dP(n.output,s,c)})}}function dP(t,e,r){return pP(t,`Run: ${e} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function pP(t,e,r){let n=new RegExp(xc(e),"g");return Pt({...t,get dimensions(){return t.dimensions},event:s=>t.event("text"in s?{...s,text:s.text.replace(n,r)}:s)})}function mP(t,e,r,n){let{env:i,cwd:s,cmd:o,args:a}=r,c=["exec","-i"];n&&c.push("-t"),e&&c.push("-u",e),i&&Object.keys(i).forEach(u=>c.push("-e",`${u}=${i[u]}`)),s&&c.push("-w",s),c.push(t);let l=c.slice();return c.push(o),a&&c.push(...a),{argsPrefix:l,args:c}}function Pc(t,e){return"dockerEnv"in t?{exec:t.common.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.dockerEnv,...vs(t.dockerEnv)},output:t.common.output}:"cliHost"in t?{exec:t.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.env,...vs(t.env)},output:t.output}:{...t,env:{...t.env,...vs(t.env)}}}async function Xg(t,e){let r={exec:await Dr(t.cwd,e),cmd:t.dockerCLI,env:t.env,output:e};if(t.rebuild){let{stdout:n,stderr:i}=await Yt(r,"rm","-f",t.containerId);e.write("Command output: "+JSON.stringify({stdout:n.toString(),stderr:i.toString()}))}else if(!t.shutdownAction||t.shutdownAction==="stopCompose"){let n=Rn(r,t.containerId,t.user),i=await Mt(n,e);if((await Ln(i)).filter(o=>o.sessionId!==t.sessionId).length===0){let o=["--project-name",t.projectName];t.composeFiles.forEach(c=>o.push("-f",c)),t.envFile&&o.push("--env-file",t.envFile),o.push("stop","-t","0"),t.runServices&&t.runServices.length&&(o.push(...t.runServices),t.runServices.indexOf(t.service)===-1&&o.push(t.service));let a;try{let c={...r,cmd:t.dockerComposeCLI.cmd,args:t.dockerComposeCLI.args};if(t.buildContainerRunArgs){let{stdout:f}=await Yt(r,...t.buildContainerRunArgs);a=f.toString().trim(),c={exec:Rn(r,a,"root"),cmd:"docker",args:["compose"],env:{},output:e}}let{stdout:l,stderr:u}=await Yg(c,...o);e.write("Command output: "+JSON.stringify({stdout:l.toString(),stderr:u.toString()}))}finally{a&&await Yt(r,"rm","-f",a)}}}}async function Zg(t,e){let r={exec:await Dr(t.cwd,e),cmd:t.dockerCLI,env:t.env,output:e};if(t.rebuild){let{stdout:n,stderr:i}=await Yt(r,"rm","-f",t.containerId);e.write("Command output: "+JSON.stringify({stdout:n.toString(),stderr:i.toString()}))}else if(!t.shutdownAction||t.shutdownAction==="stopContainer"){let n=Rn(r,t.containerId,t.user),i=await Mt(n,e);if((await Ln(i)).filter(o=>o.sessionId!==t.sessionId).length===0){let{stdout:o,stderr:a}=await Yt(r,"stop",t.containerId);e.write("Command output: "+JSON.stringify({stdout:o.toString(),stderr:a.toString()}))}}}var xs=process.argv[2],Kg=process.argv[3],Rc=ct[process.argv[4]]||3,gP=new Date(parseInt(process.argv[6],10)),Qg=process.argv[5]?rw.join(process.argv[5],`shutdownMonitor-${gP.toISOString().replace(/:/g,"-")}.log`):void 0,Lc=[],ew=Qg?Nc(Qg,()=>Math.min(2,Rc)):void 0;ew&&Lc.push(ew);Lc.push({event:t=>{1>=Rc&&$r(xs,JSON.stringify({type:"log",event:t})).catch(e=>{console.error(e)})}});var B=Pt(Dc(Lc));B.write("Starting monitor process...");var wP=Date.now(),he;(async()=>{let t=0;for(;;)try{let e=await $r(xs,JSON.stringify({type:"poll"})),r=await Ps(e);B.write("Received message: "+JSON.stringify(r));for(let n of r)if(n.type==="cleanup"){try{await tw(!0)}catch(i){B.write("Unexpected error: "+(i&&(i.stack||i.message)||String(i)))}return}else n.type==="configure"&&(he=n.options,he.logLevel&&(Rc=he.logLevel),$r(xs,JSON.stringify({type:"reply",sequence:n.sequence})).catch(i=>{B.write("Error confirming configuration: "+(i&&(i.stack||i.message)||String(i)))}));t=0}catch(e){if(B.write("Error polling extension: "+(e&&(e.stack||e.message)||String(e))),e&&(e.code==="ECONNREFUSED"||e.code==="ENOENT")){await tw(!1);return}++t>=5&&await os(1e3)}})().catch(t=>{B.write("Unexpected error: "+(t&&(t.stack||t.message)||String(t)))});async function tw(t){if(B.write(`Cleaning up after ${Date.now()-wP} ms...`),he)switch(he.delay&&(B.write(`Delaying for ${he.delay} ms.`),await os(he.delay)),Kg){case"dockerCompose":await Xg(he,B);break;case"singleContainer":await Zg(he,B);break;case"test":let{stdout:e,stderr:r}=await Oe({exec:await Dr(he.cwd,B),cmd:he.cmd,args:he.args,env:he.env,output:B});B.write("Command output: "+JSON.stringify({stdout:e.toString(),stderr:r.toString()}));break;default:B.write(`Type does not exist: ${Kg}`);break}else B.write("Not configured!");if(B.write("Done."),t)try{let e=await $r(xs,JSON.stringify({type:"done"})),r=await Ps(e);B.write("Received reply: "+JSON.stringify(r))}catch(e){B.write("Error confirming to extension: "+(e&&(e.stack||e.message)||String(e)))}}
//# sourceMappingURL=shutdownMonitorProcess.js.map
